exports.id=4745,exports.ids=[4745],exports.modules={4745:(a,b,c)=>{"use strict";c.r(b),c.d(b,{RichText:()=>aF});var d=c(31400),e=c(71144),f=c(9975),g=c(82239),h=c(13714),i=c(28623),j=c(11106);let k=(0,j.createContext)(null),l={didCatch:!1,error:null};class m extends j.Component{constructor(a){super(a),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=l}static getDerivedStateFromError(a){return{didCatch:!0,error:a}}resetErrorBoundary(){let{error:a}=this.state;if(null!==a){for(var b,c,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];null==(b=(c=this.props).onReset)||b.call(c,{args:e,reason:"imperative-api"}),this.setState(l)}}componentDidCatch(a,b){var c,d;null==(c=(d=this.props).onError)||c.call(d,a,b)}componentDidUpdate(a,b){let{didCatch:c}=this.state,{resetKeys:d}=this.props;if(c&&null!==b.error&&function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.length!==b.length||a.some((a,c)=>!Object.is(a,b[c]))}(a.resetKeys,d)){var e,f;null==(e=(f=this.props).onReset)||e.call(f,{next:d,prev:a.resetKeys,reason:"keys"}),this.setState(l)}}render(){let{children:a,fallbackRender:b,FallbackComponent:c,fallback:d}=this.props,{didCatch:e,error:f}=this.state,g=a;if(e){let a={error:f,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof b)g=b(a);else if(c)g=(0,j.createElement)(c,a);else if(void 0!==d)g=d;else throw f}return(0,j.createElement)(k.Provider,{value:{didCatch:e,error:f,resetErrorBoundary:this.resetErrorBoundary}},g)}}c(96680);var n=c(96447),o=c(2840);let p="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,q=p?j.useLayoutEffect:j.useEffect,r={tag:o.T40};function s({initialConfig:a,children:b}){let c=(0,j.useMemo)(()=>{let{theme:b,namespace:c,nodes:d,onError:e,editorState:f,html:g}=a,h=(0,n.Mx)(null,b),i=(0,o.ieJ)({editable:a.editable,html:g,namespace:c,nodes:d,onError:a=>e(a,i),theme:b});return function(a,b){if(null!==b){if(void 0===b)a.update(()=>{let b=(0,o.NiT)();if(b.isEmpty()){let c=(0,o.lJ7)();b.append(c);let d=p?document.activeElement:null;(null!==(0,o.vJq)()||null!==d&&d===a.getRootElement())&&c.select()}},r);else if(null!==b)switch(typeof b){case"string":{let c=a.parseEditorState(b);a.setEditorState(c,r);break}case"object":a.setEditorState(b,r);break;case"function":a.update(()=>{(0,o.NiT)().isEmpty()&&b(a)},r)}}}(i,f),[i,h]},[]);return q(()=>{let b=a.editable,[d]=c;d.setEditable(void 0===b||b)},[]),(0,f.jsx)(n.Gu.Provider,{value:c,children:b})}var t=c(10087);function u(a,b){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}var v={error:null},w=function(a){function b(){for(var b,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this).state=v,b.resetErrorBoundary=function(){for(var a,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];null==b.props.onReset||(a=b.props).onReset.apply(a,d),b.reset()},b}b.prototype=Object.create(a.prototype),b.prototype.constructor=b,u(b,a),b.getDerivedStateFromError=function(a){return{error:a}};var c=b.prototype;return c.reset=function(){this.setState(v)},c.componentDidCatch=function(a,b){var c,d;null==(c=(d=this.props).onError)||c.call(d,a,b)},c.componentDidUpdate=function(a,b){var c,d,e,f,g=this.state.error,h=this.props.resetKeys;null!==g&&null!==b.error&&(void 0===(e=a.resetKeys)&&(e=[]),void 0===(f=h)&&(f=[]),e.length!==f.length||e.some(function(a,b){return!Object.is(a,f[b])}))&&(null==(c=(d=this.props).onResetKeysChange)||c.call(d,a.resetKeys,h),this.reset())},c.render=function(){var a=this.state.error,b=this.props,c=b.fallbackRender,d=b.FallbackComponent,e=b.fallback;if(null!==a){var f={error:a,resetErrorBoundary:this.resetErrorBoundary};if(j.isValidElement(e))return e;if("function"==typeof c)return c(f);if(d)return j.createElement(d,f);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},b}(j.Component);function x({children:a,onError:b}){return(0,f.jsx)(w,{fallback:(0,f.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:b,children:a})}var y=c(94959);function z(a){a.undoStack=[],a.redoStack=[],a.current=null}function A({delay:a,externalHistoryState:b}){let[c]=(0,n.DF)();return function(a,b,c=1e3){let d=(0,j.useMemo)(()=>b||{current:null,redoStack:[],undoStack:[]},[b]);(0,j.useEffect)(()=>(function(a,b,c){let d,e,f=(d=Date.now(),e=0,(b,f,g,h,i,j)=>{let k=Date.now();if(j.has(o.n0X))return e=0,d=k,2;let l=function(a,b,c,d,e){if(null===a||0===c.size&&0===d.size&&!e)return 0;let f=b._selection,g=a._selection;if(e)return 1;if(!((0,o.I2P)(f)&&(0,o.I2P)(g)&&g.isCollapsed()&&f.isCollapsed()))return 0;let h=function(a,b,c){let d=a._nodeMap,e=[];for(let a of b){let b=d.get(a);void 0!==b&&e.push(b)}for(let[a,b]of c){if(!b)continue;let c=d.get(a);void 0===c||(0,o.hVZ)(c)||e.push(c)}return e}(b,c,d);if(0===h.length)return 0;if(h.length>1){let c=b._nodeMap,d=c.get(f.anchor.key),e=c.get(g.anchor.key);return d&&e&&!a._nodeMap.has(d.__key)&&(0,o.kFe)(d)&&1===d.__text.length&&1===f.anchor.offset?2:0}let i=h[0],j=a._nodeMap.get(i.__key);if(!(0,o.kFe)(j)||!(0,o.kFe)(i)||j.__mode!==i.__mode)return 0;let k=j.__text,l=i.__text;if(k===l)return 0;let m=f.anchor,n=g.anchor;if(m.key!==n.key||"text"!==m.type)return 0;let p=m.offset,q=n.offset,r=l.length-k.length;return 1===r&&q===p-1?2:-1===r&&q===p+1?3:4*(-1===r&&q===p)}(b,f,h,i,a.isComposing()),m=(()=>{let m=null===g||g.editor===a,n=j.has(o.bMH);if(!n&&m&&j.has(o.T40))return 0;if(null===b)return 1;let p=f._selection;return h.size>0||i.size>0?!1===n&&0!==l&&l===e&&k<d+c&&m||1===h.size&&function(a,b,c){let d=b._nodeMap.get(a),e=c._nodeMap.get(a),f=b._selection,g=c._selection;return!((0,o.I2P)(f)&&(0,o.I2P)(g)&&"element"===f.anchor.type&&"element"===f.focus.type&&"text"===g.anchor.type&&"text"===g.focus.type||!(0,o.kFe)(d)||!(0,o.kFe)(e)||d.__parent!==e.__parent)&&JSON.stringify(b.read(()=>d.exportJSON()))===JSON.stringify(c.read(()=>e.exportJSON()))}(Array.from(h)[0],b,f)?0:1:2*(null===p)})();return d=k,e=l,m});return(0,y.Sd)(a.registerCommand(o.ZKf,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==d.length){let e=b.current,f=d.pop();null!==e&&(c.push(e),a.dispatchCommand(o.WWb,!0)),0===d.length&&a.dispatchCommand(o.KfJ,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:o.n0X})}})(a,b),!0),o.jZM),a.registerCommand(o.V30,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==c.length){let e=b.current;null!==e&&(d.push(e),a.dispatchCommand(o.KfJ,!0));let f=c.pop();0===c.length&&a.dispatchCommand(o.WWb,!1),b.current=f||null,f&&f.editor.setEditorState(f.editorState,{tag:o.n0X})}})(a,b),!0),o.jZM),a.registerCommand(o.SKc,()=>(z(b),!1),o.jZM),a.registerCommand(o.t5V,()=>(z(b),a.dispatchCommand(o.WWb,!1),a.dispatchCommand(o.KfJ,!1),!0),o.jZM),a.registerUpdateListener(({editorState:c,prevEditorState:d,dirtyLeaves:e,dirtyElements:g,tags:h})=>{let i=b.current,j=b.redoStack,k=b.undoStack,l=null===i?null:i.editorState;if(null!==i&&c===l)return;let m=f(d,c,i,e,g,h);if(1===m)0!==j.length&&(b.redoStack=[],a.dispatchCommand(o.WWb,!1)),null!==i&&(k.push({...i}),a.dispatchCommand(o.KfJ,!0));else if(2===m)return;b.current={editor:a,editorState:c}}))})(a,d,c),[c,a,d])}(c,b,a),null}let B="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?j.useLayoutEffect:j.useEffect;function C({ignoreHistoryMergeTagChange:a=!0,ignoreSelectionChange:b=!1,onChange:c}){let[d]=(0,n.DF)();return B(()=>{if(c)return d.registerUpdateListener(({editorState:e,dirtyElements:f,dirtyLeaves:g,prevEditorState:h,tags:i})=>{b&&0===f.size&&0===g.size||a&&i.has(o.T40)||h.isEmpty()||c(e,d,i)})},[d,a,b,c]),null}var D=c(21179);function E(a){return()=>(function(a){if(!function(a,b=!0){if(a)return!1;let c=(0,o.NiT)().getTextContent();return b&&(c=c.trim()),""===c}(a,!1))return!1;let b=(0,o.NiT)().getChildren(),c=b.length;if(c>1)return!1;for(let a=0;a<c;a++){let c=b[a];if((0,o.Cyw)(c))return!1;if((0,o.ff4)(c)){if(!(0,o.bSg)(c)||0!==c.__indent)return!1;let b=c.getChildren(),d=b.length;for(let c=0;c<d;c++){let c=b[a];if(!(0,o.kFe)(c))return!1}}}return!0})(a)}var F=c(31319),G=c(47647);let H="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?j.useLayoutEffect:j.useEffect;function I(a){return a.getEditorState().read(E(a.isComposing()))}function J({contentEditable:a,placeholder:b=null,ErrorBoundary:c}){var d;let[e]=(0,n.DF)(),g=function(a,b){let[c,d]=(0,j.useState)(()=>a.getDecorators());return H(()=>a.registerDecoratorListener(a=>{(0,F.flushSync)(()=>{d(a)})}),[a]),(0,j.useEffect)(()=>{d(a.getDecorators())},[a]),(0,j.useMemo)(()=>{let d=[],e=Object.keys(c);for(let g=0;g<e.length;g++){let h=e[g],i=(0,f.jsx)(b,{onError:b=>a._onError(b),children:(0,f.jsx)(j.Suspense,{fallback:null,children:c[h]})}),k=a.getElementByKey(h);null!==k&&d.push((0,F.createPortal)(i,k,h))}return d},[b,c,a])}(e,c);return H(()=>(0,y.Sd)((0,G.ZI)(d),function(a){let b=window.location.origin,c=c=>{if(c.origin!==b)return;let d=a.getRootElement();if(document.activeElement!==d)return;let e=c.data;if("string"==typeof e){let b;try{b=JSON.parse(e)}catch(a){return}if(b&&"nuanria_messaging"===b.protocol&&"request"===b.type){let d=b.payload;if(d&&"makeChanges"===d.functionId){let b=d.args;if(b){let[d,e,f,g,h,i]=b;a.update(()=>{let a=(0,o.vJq)();if((0,o.I2P)(a)){let b=a.anchor,i=b.getNode(),j=0,k=0;if((0,o.kFe)(i)&&d>=0&&e>=0&&(j=d,k=d+e,a.setTextNodeRange(i,j,i,k)),j===k&&""===f||(a.insertRawText(f),i=b.getNode()),(0,o.kFe)(i)){j=g,k=g+h;let b=i.getTextContentSize();j=j>b?b:j,k=k>b?b:k,a.setTextNodeRange(i,j,i,k)}c.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",c,!0),()=>{window.removeEventListener("message",c,!0)}}(d)),[d=e]),(0,f.jsxs)(f.Fragment,{children:[a,(0,f.jsx)(K,{content:b}),g]})}function K({content:a}){let[b]=(0,n.DF)(),c=function(a){let[b,c]=(0,j.useState)(()=>I(a));return H(()=>{function b(){c(I(a))}return b(),(0,y.Sd)(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),d=(0,D.a)();return c?"function"==typeof a?a(d):a:null}var L=c(63638),M=c(99330),N=c(64498);let O="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?j.useLayoutEffect:j.useEffect,P=(0,j.forwardRef)(function({editor:a,ariaActiveDescendant:b,ariaAutoComplete:c,ariaControls:d,ariaDescribedBy:e,ariaErrorMessage:g,ariaExpanded:h,ariaInvalid:i,ariaLabel:k,ariaLabelledBy:l,ariaMultiline:m,ariaOwns:n,ariaRequired:o,autoCapitalize:p,className:q,id:r,role:s="textbox",spellCheck:t=!0,style:u,tabIndex:v,"data-testid":w,...x},y){let[z,A]=(0,j.useState)(a.isEditable()),B=(0,j.useCallback)(b=>{b&&b.ownerDocument&&b.ownerDocument.defaultView?a.setRootElement(b):a.setRootElement(null)},[a]),C=(0,j.useMemo)(()=>(function(...a){return b=>{a.forEach(a=>{"function"==typeof a?a(b):null!=a&&(a.current=b)})}})(y,B),[B,y]);return O(()=>(A(a.isEditable()),a.registerEditableListener(a=>{A(a)})),[a]),(0,f.jsx)("div",{"aria-activedescendant":z?b:void 0,"aria-autocomplete":z?c:"none","aria-controls":z?d:void 0,"aria-describedby":e,...null!=g?{"aria-errormessage":g}:{},"aria-expanded":z&&"combobox"===s?!!h:void 0,...null!=i?{"aria-invalid":i}:{},"aria-label":k,"aria-labelledby":l,"aria-multiline":m,"aria-owns":z?n:void 0,"aria-readonly":!z||void 0,"aria-required":o,autoCapitalize:p,className:q,contentEditable:z,"data-testid":w,id:r,ref:C,role:s,spellCheck:t,style:u,tabIndex:v,...x})});function Q(a){return a.getEditorState().read(E(a.isComposing()))}let R=(0,j.forwardRef)(function(a,b){let{placeholder:c,...d}=a,[e]=(0,n.DF)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(P,{editor:e,...d,ref:b}),null!=c&&(0,f.jsx)(S,{editor:e,content:c})]})});function S({content:a,editor:b}){let c=function(a){let[b,c]=(0,j.useState)(()=>Q(a));return O(()=>{function b(){c(Q(a))}return b(),(0,y.Sd)(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(b),[d,e]=(0,j.useState)(b.isEditable());if((0,j.useLayoutEffect)(()=>(e(b.isEditable()),b.registerEditableListener(a=>{e(a)})),[b]),!c)return null;let g=null;return"function"==typeof a?g=a(d):null!==a&&(g=a),null===g?null:(0,f.jsx)("div",{"aria-hidden":!0,children:g})}var T=({anchorElem:a,clientProps:b,plugin:c})=>"floatingAnchorElem"===c.position&&a?c.Component&&(0,f.jsx)(c.Component,{anchorElem:a,clientProps:b}):c.Component&&(0,f.jsx)(c.Component,{clientProps:b}),U=a=>{if("fields"in a&&"object"==typeof a.fields&&null!==a.fields&&"id"in a.fields?a.fields.id=new M.default().toHexString():"id"in a&&(a.id=new M.default().toHexString()),a.children)for(let b of a.children)U(b)};function V(){let a=(0,t.c)(3),[b]=(0,n.DF)(),c,d;return a[0]!==b?(c=()=>b.registerCommand(o.u5G,a=>{let c=(0,o.vJq)();if((0,o.RTZ)(c)){let a=JSON.parse(JSON.stringify(c.getNodes()[0]?.exportJSON()));U(a);let d=JSON.stringify({namespace:b._config.namespace,nodes:[a]});return(0,L.lW)(b,null,{"application/x-lexical-editor":d,"text/plain":""}).catch(W),!0}return(0,L.lW)(b,(0,y.xj)(a,ClipboardEvent)?a:null).then(()=>{if(!(a instanceof ClipboardEvent)||!a.clipboardData)throw Error("No clipboard event");let b=a.clipboardData.getData("application/x-lexical-editor");if(!b)return!0;let c=JSON.parse(b);for(let a of c.nodes)U(a);let d=JSON.stringify(c);a.clipboardData.setData("application/x-lexical-editor",d)}).catch(b=>{throw a instanceof ClipboardEvent&&a.clipboardData?.setData("application/x-lexical-editor",""),b}),!0},o.AcJ),d=[b],a[0]=b,a[1]=c,a[2]=d):(c=a[1],d=a[2]),null}function W(a){throw a}function X(){let a=(0,t.c)(3),[b]=(0,n.DF)(),c,d;return a[0]!==b?(c=()=>(0,y.Sd)(b.registerCommand(o.d8p,ab,o.AcJ),b.registerCommand(o.w$Z,ac,o.AcJ),b.registerCommand(o.gCZ,ac,o.AcJ),b.registerCommand(o.MvL,aa,o.AcJ),b.registerCommand(o.UDz,$,o.AcJ),b.registerCommand(o.bbF,Y,o.AcJ)),d=[b],a[0]=b,a[1]=c,a[2]=d):(c=a[1],d=a[2]),null}function Y(a){let b=(0,o.vJq)();if((0,o.RTZ)(b)){a.preventDefault();let c=b.getNodes()[0]?.getNextSibling();if((0,o.Cyw)(c)){let a=(0,o.i0_)().getElementByKey(c.getKey());return a&&ae({element:a,node:c}),!0}if(!(0,o.ff4)(c))return!0;let d=c.getFirstDescendant()??c;return d&&((0,y.Bt)(d,af)?.selectEnd(),a.preventDefault()),!0}if(!(0,o.I2P)(b))return!1;let c=(b.isBackward()?b.anchor:b.focus).getNode(),d=(0,y.Bt)(c,Z),e=d?.getNextSibling();if(!d||e!==ag(d))return!1;if((0,o.Cyw)(e)){let b=(0,o.i0_)().getElementByKey(e.getKey());if(b)return ae({element:b,node:e}),a.preventDefault(),!0}return!1}function Z(a){return null!==ag(a)}function $(a){let b=(0,o.vJq)();if((0,o.RTZ)(b)){let c=b.getNodes()[0]?.getPreviousSibling();if((0,o.Cyw)(c)){let b=(0,o.i0_)().getElementByKey(c.getKey());return!!b&&(ae({element:b,node:c}),a.preventDefault(),!0)}if(!(0,o.ff4)(c))return!1;let d=c.getLastDescendant()??c;return!!d&&((0,y.Bt)(d,af)?.selectStart(),a.preventDefault(),!0)}if(!(0,o.I2P)(b))return!1;let c=(b.isBackward()?b.anchor:b.focus).getNode(),d=(0,y.Bt)(c,_),e=d?.getPreviousSibling();if(!d||e!==ah(d))return!1;if((0,o.Cyw)(e)){let b=(0,o.i0_)().getElementByKey(e.getKey());if(b)return ae({element:b,node:e}),a.preventDefault(),!0}return!1}function _(a){return null!==ah(a)}function aa(){let a=function(){let a=(0,o.vJq)();if(!(0,o.RTZ)(a))return;let b=a.getNodes();if(1!==b.length)return;let c=b[0];return(0,o.Cyw)(c)?{decorator:c,element:(0,o.i0_)().getElementByKey(c.getKey())}:void 0}();return document.querySelector(".decorator-selected")?.classList.remove("decorator-selected"),!!a&&(a.element?.classList.add("decorator-selected"),!0)}function ab(a){document.querySelector(".decorator-selected")?.classList.remove("decorator-selected");let b=function(a){if(!(a.target instanceof HTMLElement))return;let b=a.target.closest('[data-lexical-decorator="true"]');if(!(b instanceof HTMLElement))return;let c=(0,o.xL4)(b);return(0,o.Cyw)(c)?{element:b,node:c}:void 0}(a);if(!b)return!0;let{target:c}=a;return!(c instanceof HTMLElement)||c.isContentEditable||c.closest('button, textarea, input, .react-select, .code-editor, .no-select-decorator, [role="button"]')?(0,o.n1P)(null):ae(b),!0}function ac(a){let b=(0,o.vJq)();return!!(0,o.RTZ)(b)&&(a.preventDefault(),b.getNodes().forEach(ad),!0)}function ad(a){a.remove()}function ae({element:a,node:b}){document.querySelector(".decorator-selected")?.classList.remove("decorator-selected");let c=(0,o.rUs)();c.add(b.getKey()),(0,o.n1P)(c),a.scrollIntoView({behavior:"smooth",block:"nearest"}),a.classList.add("decorator-selected")}function af(a){if((0,o.Cyw)(a)&&!a.isInline())return!0;if(!(0,o.ff4)(a)||(0,o.IqF)(a))return!1;let b=a.getFirstChild(),c=null===b||(0,o.wH$)(b)||(0,o.kFe)(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&c}function ag(a){let b=a.getNextSibling();for(;null!==b;){if(af(b))return b;b=b.getNextSibling()}return null}function ah(a){let b=a.getPreviousSibling();for(;null!==b;){if(af(b))return b;b=b.getPreviousSibling()}return null}function ai(a){let{anchorElem:b}=a,c=void 0===b?document.body:b,[g]=(0,n.DF)();return function(a,b,c){b.parentElement;let{editorConfig:g}=(0,e.b)(),h=(g?.admin?.hideGutter,(0,j.useRef)(null)),[i,k]=(0,j.useState)(null),l=(0,j.useCallback)(b=>{let c=i;c?.node&&(a.update(()=>{let b=!0;if((c?.node.getType()!=="paragraph"||""!==c.node.getTextContent())&&(b=!1),!b){let b=(0,o.lJ7)();c?.node.insertAfter(b),setTimeout(()=>{k(c={elem:a.getElementByKey(b.getKey()),node:b})},0)}}),setTimeout(()=>{a.update(()=>{a.focus(),c?.node&&"select"in c.node&&"function"==typeof c.node.select&&c.node.select()})},1),setTimeout(()=>{a.dispatchCommand(d.i,{node:c?.node})},2),b.stopPropagation(),b.preventDefault())},[a,i]);return(0,F.createPortal)((0,f.jsx)(j.Fragment,{children:(0,f.jsx)("button",{"aria-label":"Add block",className:"icon add-block-menu",onClick:a=>{l(a)},ref:h,type:"button",children:(0,f.jsx)("div",{className:c?"icon":""})})}),b)}(g,c,g._editable)}function aj(a){let{anchorElem:b}=a,c=void 0===b?document.body:b,[d]=(0,n.DF)();return function(a,b,c){b.parentElement;let d=(0,j.useRef)(null),g=(0,j.useRef)(null),h=(0,j.useRef)(null),i=(0,j.useRef)(!1),[k,l]=(0,j.useState)(null),[m,n]=(0,j.useState)(null),{editorConfig:p}=(0,e.b)();return p?.admin?.hideGutter,(0,F.createPortal)((0,f.jsxs)(j.Fragment,{children:[(0,f.jsx)("button",{"aria-label":"Drag to move",className:"icon draggable-block-menu",draggable:!0,onDragEnd:function(){var a,b;i.current=!1,m?.elem&&(a=g.current,b=m?.elem,a&&(a.style.opacity="0"),b&&(b.style.opacity="",b.style.marginBottom="",b.style.marginTop=""))},onDragStart:function(b){let c=b.dataTransfer;if(!c||!k)return;!function(a,b){let{transform:c}=b.style;a.setDragImage(b,0,0),setTimeout(()=>{b.style.transform=c})}(c,k);let d="";a.update(()=>{let a=(0,o.xL4)(k);a&&(d=a.getKey())}),i.current=!0,c.setData("application/x-lexical-drag-block",d)},ref:d,type:"button",children:(0,f.jsx)("div",{className:c?"icon":""})}),(0,f.jsx)("div",{className:"draggable-block-target-line",ref:g}),(0,f.jsx)("div",{className:"debug-highlight",ref:h})]}),b)}(d,c,d._editable)}var ak="insert-paragraph-at-end",al=()=>{let a,b=(0,t.c)(2),[c]=(0,n.DF)(),{editorConfig:d}=(0,e.b)();return d?.admin?.hideInsertParagraphAtEnd?null:(b[0]!==c?(a=(0,f.jsx)("div",{"aria-label":"Insert Paragraph",className:ak,onClick:()=>{c.update(am)},role:"button",tabIndex:0,children:(0,f.jsx)("div",{className:`${ak}-inside`,children:(0,f.jsx)("span",{children:"+"})})}),b[0]=c,b[1]=a):a=b[1],a)};function am(){let a=(0,o.lJ7)();(0,o.NiT)().append(a),a.select()}var an=()=>{let a=(0,t.c)(4),{editorConfig:b}=(0,e.b)(),[c]=(0,n.DF)(),f,g;return a[0]!==c||a[1]!==b.features.markdownTransformers?(f=()=>(0,d.a)(c,b.features.markdownTransformers??[]),g=[c,b.features.markdownTransformers],a[0]=c,a[1]=b.features.markdownTransformers,a[2]=f,a[3]=g):(f=a[2],g=a[3]),j.useEffect(f,g),null};function ao(){let[a]=(0,n.DF)();return null}function ap(){let[a]=(0,n.DF)();return null}var aq="slash-menu-popup";function ar({isSelected:a,item:b,onClick:c,onMouseEnter:d,ref:g}){let{fieldProps:{featureClientSchemaMap:h,schemaPath:i}}=(0,e.b)(),{i18n:j}=(0,N.d)(),k=`${aq}__item ${aq}__item-${b.key}`;a&&(k+=` ${aq}__item--selected`);let l=b.key;return b.label&&(l="function"==typeof b.label?b.label({featureClientSchemaMap:h,i18n:j,schemaPath:i}):b.label),l.length>25&&(l=l.substring(0,25)+"..."),(0,f.jsxs)("button",{"aria-selected":a,className:k,id:aq+"__item-"+b.key,onClick:c,onMouseEnter:d,ref:g,role:"option",tabIndex:-1,type:"button",children:[b?.Icon&&(0,f.jsx)(b.Icon,{}),(0,f.jsx)("span",{className:`${aq}__item-text`,children:l})]},b.key)}function as({anchorElem:a=document.body}){let[b]=(0,n.DF)(),[c,g]=(0,j.useState)(null),{editorConfig:h}=(0,e.b)(),{i18n:i}=(0,N.d)(),{fieldProps:{featureClientSchemaMap:k,schemaPath:l}}=(0,e.b)(),m=function(a,b){let c=(0,t.c)(4),{maxLength:e,minLength:f}=b,g=void 0===e?75:e,h=void 0===f?1:f,i;return c[0]!==g||c[1]!==h||"/"!==c[2]?(i=b=>{let{query:c}=b,e="[^/"+d.h+"\\s]",f=RegExp("(^|\\s|\\()(["+a+"]((?:"+e+"){0,"+g+"}))$").exec(c);if(null!==f){let a=f[1],b=f[3];if(b.length>=h)return{leadOffset:f.index+a.length,matchingString:b,replaceableString:f[2]}}return null},c[0]=g,c[1]=h,c[2]=a,c[3]=i):i=c[3],i}("/",{minLength:0}),o=(0,j.useCallback)(()=>{let a=[];for(let d of h.features.slashMenu.dynamicGroups)if(c){let e=d({editor:b,queryString:c});a=a.concat(e)}return a},[b,c,h?.features]),p=(0,j.useMemo)(()=>{let a=[];for(let b of h?.features.slashMenu.groups??[])a.push(b);if(c)for(let b of(a=(a=a.map(a=>{let b=a.items.filter(a=>{let b=a.key;return a.label&&(b="function"==typeof a.label?a.label({featureClientSchemaMap:k,i18n:i,schemaPath:l}):a.label),!!RegExp(c,"gi").exec(b)||null!=a.keywords&&a.keywords.some(a=>RegExp(c,"gi").exec(a))});return b.length?{...a,items:b}:null})).filter(a=>null!=a),o())){let c=a.find(a=>a.key===b.key);c?a=a.filter(a=>a.key!==b.key):c={...b,items:[]},c?.items?.length&&(c.items=c.items.concat(c.items)),a.push(c)}return a},[c,h?.features.slashMenu.groups,o,k,i,l]);return(0,f.jsx)(d.j,{anchorElem:a,groups:p,menuRenderFn:(a,{selectedItemKey:b,selectItemAndCleanUp:c,setSelectedItemKey:d})=>a.current&&p.length?F.createPortal((0,f.jsx)("div",{className:aq,children:p.map(a=>{let e=a.key;return a.label&&k&&(e="function"==typeof a.label?a.label({featureClientSchemaMap:k,i18n:i,schemaPath:l}):a.label),(0,f.jsxs)("div",{className:`${aq}__group ${aq}__group-${a.key}`,children:[(0,f.jsx)("div",{className:`${aq}__group-title`,children:e}),a.items.map((a,e)=>(0,f.jsx)(ar,{index:e,isSelected:b===a.key,item:a,onClick:()=>{d(a.key),c(a)},onMouseEnter:()=>{d(a.key)},ref:b=>{a.ref={current:b}}},a.key))]},a.key)})}),a.current):null,onQueryChange:g,triggerFn:m})}function at(a){let b,c=(0,t.c)(6),{features:d}=a,[e]=(0,n.DF)(),f;return c[0]!==e||c[1]!==d.enabledFormats?(f=()=>{var a;let b,c,f=(a=d.enabledFormats,b=Object.keys(o.LZn),c=new Set(a),b.filter(a=>!c.has(a)));if(0!==f.length)return e.registerNodeTransform(o.Ey8,a=>{f.forEach(b=>{a.hasFormat(b)&&a.toggleFormat(b)})})},c[0]=e,c[1]=d.enabledFormats,c[2]=f):f=c[2],c[3]!==e||c[4]!==d?(b=[e,d],c[3]=e,c[4]=d,c[5]=b):b=c[5],null}function au(a){let b=(0,t.c)(5),{className:c,editorConfig:d}=a,{t:e}=(0,N.d)(),[,g]=(0,n.DF)(),{getTheme:h}=g,i;if(b[0]!==c||b[1]!==d?.admin?.placeholder||b[2]!==h||b[3]!==e){let a=h();i=(0,f.jsx)(R,{"aria-placeholder":e("lexical:general:placeholder"),className:c??"ContentEditable__root",placeholder:(0,f.jsx)("p",{className:a?.placeholder,children:d?.admin?.placeholder??e("lexical:general:placeholder")})}),b[0]=c,b[1]=d?.admin?.placeholder,b[2]=h,b[3]=e,b[4]=i}else i=b[4];return i}var av=a=>{let b,c=(0,t.c)(12),{editorConfig:d,editorContainerRef:g,isSmallWidthViewport:h,onChange:i}=a,k=(0,e.b)(),[l]=(0,n.DF)(),m=(0,D.a)(),[p,q]=(0,j.useState)(null),r;c[0]===Symbol.for("react.memo_cache_sentinel")?(r=a=>{null!==a&&q(a)},c[0]=r):r=c[0];let s=r,u,v;return c[1]!==l||c[2]!==k?(u=()=>{if(!k?.uuid)return void console.error("Lexical Editor must be used within an EditorConfigProvider");k?.parentEditor?.uuid&&k.parentEditor?.registerChild(k.uuid,k);let a=l.registerCommand(o.$7r,()=>(k.focusEditor(k),!0),o.AcJ),b=l.registerCommand(o.I2H,()=>(k.blurEditor(k),!0),o.AcJ);return()=>{a(),b(),k.parentEditor?.unregisterChild?.(k.uuid)}},v=[l,k],c[1]=l,c[2]=k,c[3]=u,c[4]=v):(u=c[3],v=c[4]),(0,j.useEffect)(u,v),c[5]!==d||c[6]!==g||c[7]!==p||c[8]!==m||c[9]!==h||c[10]!==i?(b=(0,f.jsxs)(j.Fragment,{children:[d.features.plugins?.map(aw),(0,f.jsxs)("div",{className:"editor-container",ref:g,children:[d.features.plugins?.map(ax),(0,f.jsx)(J,{contentEditable:(0,f.jsx)("div",{className:"editor-scroller",children:(0,f.jsx)("div",{className:"editor",ref:s,children:(0,f.jsx)(au,{editorConfig:d})})}),ErrorBoundary:x}),(0,f.jsx)(ao,{}),m&&(0,f.jsx)(al,{}),(0,f.jsx)(X,{}),(0,f.jsx)(V,{}),(0,f.jsx)(at,{features:d.features}),(0,f.jsx)(ap,{}),m&&(0,f.jsx)(C,{ignoreSelectionChange:!0,onChange:(a,b,c)=>{(!c.has("focus")||c.size>1)&&i?.(a,b,c)}}),p&&(0,f.jsxs)(j.Fragment,{children:[!h&&m&&(0,f.jsxs)(j.Fragment,{children:[d.admin?.hideDraggableBlockElement?null:(0,f.jsx)(aj,{anchorElem:p}),d.admin?.hideAddBlockButton?null:(0,f.jsx)(ai,{anchorElem:p})]}),d.features.plugins?.map(a=>{if("floatingAnchorElem"===a.position&&!(!0===a.desktopOnly&&h))return(0,f.jsx)(T,{anchorElem:p,clientProps:a.clientProps,plugin:a},a.key)}),m&&(0,f.jsx)(j.Fragment,{children:(0,f.jsx)(as,{anchorElem:p})})]}),m&&(0,f.jsxs)(j.Fragment,{children:[(0,f.jsx)(A,{}),d?.features?.markdownTransformers?.length>0&&(0,f.jsx)(an,{})]}),d.features.plugins?.map(ay),d.features.plugins?.map(az)]}),d.features.plugins?.map(aA)]}),c[5]=d,c[6]=g,c[7]=p,c[8]=m,c[9]=h,c[10]=i,c[11]=b):b=c[11],b};function aw(a){if("aboveContainer"===a.position)return(0,f.jsx)(T,{clientProps:a.clientProps,plugin:a},a.key)}function ax(a){if("top"===a.position)return(0,f.jsx)(T,{clientProps:a.clientProps,plugin:a},a.key)}function ay(a){if("normal"===a.position)return(0,f.jsx)(T,{clientProps:a.clientProps,plugin:a},a.key)}function az(a){if("bottom"===a.position)return(0,f.jsx)(T,{clientProps:a.clientProps,plugin:a},a.key)}function aA(a){if("belowContainer"===a.position)return(0,f.jsx)(T,{clientProps:a.clientProps,plugin:a},a.key)}var aB=({children:a,providers:b})=>{if(!b?.length)return a;let c=b[0];return b.length>1?(0,f.jsx)(c,{children:(0,f.jsx)(aB,{providers:b.slice(1),children:a})}):(0,f.jsx)(c,{children:a})},aC=a=>{let{composerKey:b,editorConfig:c,fieldProps:h,isSmallWidthViewport:i,onChange:k,readOnly:l,value:m}=a,n=(0,e.b)(),o=(0,g.useEditDepth)(),p=j.useRef(null),q=(0,j.useMemo)(()=>{if(m&&"object"!=typeof m)throw Error("The value passed to the Lexical editor is not an object. This is not supported. Please remove the data from the field and start again. This is the value that was passed in: "+JSON.stringify(m));if(m&&Array.isArray(m)&&!("root"in m))throw Error("You have tried to pass in data from the old Slate editor to the new Lexical editor. The data structure is different, thus you will have to migrate your data. We offer a one-line migration script which migrates all your rich text fields: https://payloadcms.com/docs/lexical/migration#migration-via-migration-script-recommended");if(m&&"jsonContent"in m)throw Error("You have tried to pass in data from payload-plugin-lexical. The data structure is different, thus you will have to migrate your data. Migration guide: https://payloadcms.com/docs/lexical/migration#migrating-from-payload-plugin-lexical");return{editable:!0!==l,editorState:null!=m?JSON.stringify(m):void 0,namespace:c.lexical.namespace,nodes:(0,d.l)({editorConfig:c}),onError:a=>{throw a},theme:c.lexical.theme}},[c]);return q?(0,f.jsx)(s,{initialConfig:q,children:(0,f.jsx)(e.a,{editorConfig:c,editorContainerRef:p,fieldProps:h,parentContext:n?.editDepth===o?n:void 0,children:(0,f.jsx)(aB,{providers:c.features.providers,children:(0,f.jsx)(av,{editorConfig:c,editorContainerRef:p,isSmallWidthViewport:i,onChange:k})})})},b+q.editable):(0,f.jsx)("p",{children:"Loading..."})},aD="rich-text-lexical";function aE({error:a}){return(0,f.jsxs)("div",{className:"errorBoundary",role:"alert",children:[(0,f.jsx)("p",{children:"Something went wrong:"}),(0,f.jsx)("pre",{style:{color:"red"},children:a.message})]})}var aF=a=>{let{editorConfig:b,field:c,field:{admin:{className:e,description:k,readOnly:l}={},label:n,localized:o,required:p},path:q,readOnly:r,validate:s}=a,t=(0,g.useEditDepth)(),u=(0,j.useCallback)((a,b)=>"function"!=typeof s||s(a,{...b,required:p}),[s,p]),{customComponents:{AfterInput:v,BeforeInput:w,Description:x,Error:y,Label:z}={},disabled:A,initialValue:B,path:C,setValue:D,showError:E,value:F}=(0,g.useField)({potentiallyStalePath:q,validate:u}),G=r||l||A,[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)(),L=j.useRef(B),M=j.useRef(F);(0,j.useEffect)(()=>{let a=()=>{let a=window.matchMedia("(max-width: 768px)").matches;a!==H&&I(a)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[H]);let N=[aD,"field-type",e,E&&"error",G&&`${aD}--read-only`,b?.admin?.hideGutter!==!0&&!H?`${aD}--show-gutter`:null].filter(Boolean).join(" "),O=`${C}.${t}`,P=(0,d.e)(),Q=(0,j.useCallback)(a=>{P(()=>{let b=a.toJSON();M.current=b,D(b)})},[D,P]),R=(0,j.useMemo)(()=>(0,h.FR)(c),[c]),S=(0,g.useEffectEvent)(a=>{M.current===F||(0,i.j)(null!=M.current?JSON.parse(JSON.stringify(M.current)):M.current,F)||(L.current=a,M.current=F,K(new Date))});return(0,j.useEffect)(()=>{Object.is(B,L.current)||S(B)},[B]),(0,f.jsxs)("div",{className:N,style:R,children:[(0,f.jsx)(g.RenderCustomComponent,{CustomComponent:y,Fallback:(0,f.jsx)(g.FieldError,{path:C,showError:E})}),z||(0,f.jsx)(g.FieldLabel,{label:n,localized:o,path:C,required:p}),(0,f.jsxs)("div",{className:`${aD}__wrap`,children:[(0,f.jsxs)(m,{fallbackRender:aE,onReset:()=>{},children:[w,(0,f.jsx)(g.BulkUploadProvider,{drawerSlugPrefix:C,children:(0,f.jsx)(aC,{composerKey:O,editorConfig:b,fieldProps:a,isSmallWidthViewport:H,onChange:Q,readOnly:G,value:F},JSON.stringify({path:C,rerenderProviderKey:J}))}),v]}),(0,f.jsx)(g.RenderCustomComponent,{CustomComponent:x,Fallback:(0,f.jsx)(g.FieldDescription,{description:k,path:C})})]})]},O)}},96680:()=>{}};