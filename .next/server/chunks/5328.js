"use strict";exports.id=5328,exports.ids=[5328],exports.modules={6644:(a,b,c)=>{Object.defineProperty(b,"f",{enumerable:!0,get:function(){return d}});class d extends Response{static #a=this.displayName="ImageResponse";constructor(...a){let b=new ReadableStream({async start(b){let d=new(await Promise.resolve().then(c.bind(c,83725))).ImageResponse(...a);if(!d.body)return b.close();let e=d.body.getReader();for(;;){let{done:a,value:c}=await e.read();if(a)return b.close();b.enqueue(c)}}}),d=a[1]||{},e=new Headers({"content-type":"image/png","cache-control":"public, immutable, no-transform, max-age=31536000"});d.headers&&new Headers(d.headers).forEach((a,b)=>e.set(b,a)),super(b,{headers:e,status:d.status,statusText:d.statusText})}}},8119:(a,b,c)=>{a.exports=c(44870)},21590:(a,b,c)=>{c.d(b,{o:()=>m});var d=c(19669),e=c(18866),f=c(56405),g=c(96493),h=c(25362),i=c(82397),j=c(81218),k=c(32982),l=c(46651);let m=async({canSetHeaders:a,config:b,params:c,payloadInstanceCacheKey:m,request:n})=>{let o=(0,l.J)(n.headers),p=await (0,h.nm0)({config:b,cron:!0,key:m}),{config:q}=p,r=q.localization,s=new URL(n.url),{pathname:t,searchParams:u}=s,v=!q.graphQL.disable&&t===(0,j.Q)({apiRoute:q.routes.api,path:q.routes.graphQL}),w=(0,k.Y)({config:q,cookies:o,headers:n.headers}),x=await (0,d.L)({config:q.i18n,context:"api",language:w}),y=u.get("locale"),{search:z}=s,A=z?e.q(z,{arrayLimit:1e3,depth:10,ignoreQueryPrefix:!0}):{},B=A.fallbackLocale||u.get("fallback-locale")||u.get("fallbackLocale");if(r){let a=(0,i.T)({fallbackLocale:B,locale:y,localization:r});B=a.fallbackLocale,y=a.locale}let C=Object.assign(n,{context:{},fallbackLocale:B,hash:s.hash,host:s.host,href:s.href,i18n:x,locale:y,origin:s.origin,pathname:s.pathname,payload:p,payloadAPI:v?"GraphQL":"REST",payloadDataLoader:void 0,payloadUploadSizes:{},port:s.port,protocol:s.protocol,query:A,routeParams:c||{},search:s.search,searchParams:s.searchParams,t:x.t,transactionID:void 0,user:null});C.payloadDataLoader=(0,g.Y)(C);let{responseHeaders:D,user:E}=await (0,f.F)({canSetHeaders:a,headers:C.headers,isGraphQL:v,payload:p});return C.user=E,D&&(C.responseHeaders=D),C}},54573:(a,b,c)=>{a.exports=c(41695).vendored["react-rsc"].ReactJsxRuntime},61759:(a,b,c)=>{c.d(b,{SJ:()=>H,fG:()=>F,lw:()=>E,D9:()=>I,LO:()=>G,Uc:()=>J});var d=c(24401),e=c(93382),f=c(21590),g=c(81218),h=c(8906),i=c(90519),j=c(70404),k=c(25362),l=c(74713),m=c(146),n=c(60133);let o=async({collection:a,config:b,err:c,req:e})=>{if("payloadInitError"in c&&!0===c.payloadInitError)return console.error(c),Response.json({message:"There was an error initializing Payload"},{status:d.h.INTERNAL_SERVER_ERROR});let f=e&&"payload"in e&&e?.payload;if(!f)try{f=await (0,k.nm0)({config:b,cron:!0})}catch(a){return Response.json({message:"There was an error initializing Payload"},{status:d.h.INTERNAL_SERVER_ERROR})}let g=(0,l.v)(c),o=c.status||d.h.INTERNAL_SERVER_ERROR;(0,n.v)({err:c,payload:f}),e.payload=f;let p=(0,h.y)({headers:new Headers,req:e}),{config:q}=f;return(0,m.q)(c,q)||(g=(0,l.v)(new j.L("Something went wrong."))),q.debug&&!0===q.debug&&(g.stack=c.stack),a&&await a.config.hooks.afterError?.reduce(async(b,d)=>{await b;let f=await d({collection:a.config,context:e.context,error:c,req:e,result:g});f&&(g=f.response||g,o=f.status||o)},Promise.resolve()),await q.hooks.afterError?.reduce(async(b,d)=>{await b;let f=await d({collection:a?.config,context:e.context,error:c,req:e,result:g});f&&(g=f.response||g,o=f.status||o)},Promise.resolve()),Response.json(g,{headers:e.responseHeaders?(0,i.l)(e.responseHeaders,p):p,status:o})},p=(a,b)=>Response.json({message:`Route not found "${b??new URL(a.url).pathname}"`},{headers:(0,h.y)({headers:new Headers,req:a}),status:d.h.NOT_FOUND}),q=async({basePath:a="",config:b,path:c,payloadInstanceCacheKey:j,request:k})=>{let l,m,n;if("post"===k.method.toLowerCase()&&("GET"===k.headers.get("X-Payload-HTTP-Method-Override")||"GET"===k.headers.get("X-HTTP-Method-Override"))){let d,e=k.url;if("application/x-www-form-urlencoded"===k.headers.get("Content-Type")){let a=await k.text();e=`${k.url}?${a}`}else"application/json"===k.headers.get("Content-Type")&&(d=await k.json(),d?.locale&&(e+=`?locale=${d.locale}`),d?.fallbackLocale&&(e+=`&fallbackLocale=${d.depth}`));let f=new Request(e,{cache:k.cache,credentials:k.credentials,headers:k.headers,method:"GET",signal:k.signal});return d&&(f.data=d),await q({basePath:a,config:b,path:c,payloadInstanceCacheKey:j,request:f})}try{let a;if(m=await (0,f.o)({canSetHeaders:!0,config:b,payloadInstanceCacheKey:j,request:k}),m.method?.toLowerCase()==="options")return Response.json({},{headers:(0,h.y)({headers:new Headers,req:m}),status:200});let{payload:o}=m,{config:q}=o,r=c??new URL(m.url).pathname,s=(0,g.Q)({apiRoute:q.routes.api,path:""});if(!r.startsWith(s))return p(m,r);let t=r.replace(s,""),u=!1;t.startsWith("/globals")&&(u=!0,t=t.replace("/globals",""));let v=t.split("/");v.shift();let w=v[0];w&&(u?a=o.globals.config.find(a=>a.slug===w):o.collections[w]&&(n=o.collections[w]));let x=q.endpoints;if(n?(x=n.config.endpoints,t=t.replace(`/${n.config.slug}`,"")):a&&(t=t.replace(`/${a.slug}`,""),x=a.endpoints),""===t&&(t="/"),!1===x)return Response.json({message:`Cannot ${m.method?.toUpperCase()} ${m.url}`},{headers:(0,h.y)({headers:new Headers,req:m}),status:d.h.NOT_IMPLEMENTED});let y=x?.find(b=>{if(b.method!==m.method?.toLowerCase())return!1;let c=(0,e.YW)(b.path,{decode:decodeURIComponent})(t);return!!c&&(m.routeParams=c.params,n?m.routeParams.collection=n.config.slug:a&&(m.routeParams.global=a.slug),!0)});if(y&&(l=y.handler),!l)return p(m,r);let z=await l(m);return new Response(z.body,{headers:(0,h.y)({headers:(0,i.l)(m.responseHeaders??new Headers,z.headers),req:m}),status:z.status,statusText:z.statusText})}catch(a){return o({collection:n,config:b,err:a,req:m})}};var r=c(54573),s=c(84970),t=c(79748),u=c(6644),v=c(33873);c(92408);var w=c(79551),x=c(22092);let y=({description:a,Fallback:b,fontFamily:c="Arial, sans-serif",Icon:d,importMap:e,leader:f,title:g})=>{let h=(0,x.f)({clientProps:{fill:"white"},Component:d,Fallback:b,importMap:e});return(0,r.jsxs)("div",{style:{backgroundColor:"#000",color:"#fff",display:"flex",flexDirection:"column",fontFamily:c,height:"100%",justifyContent:"space-between",padding:"100px",width:"100%"},children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1,fontSize:50,height:"100%"},children:[f&&(0,r.jsx)("div",{style:{fontSize:30,marginBottom:10},children:f}),(0,r.jsx)("p",{style:{display:"-webkit-box",fontSize:90,lineHeight:1,marginBottom:0,marginTop:0,textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:g}),a&&(0,r.jsx)("p",{style:{display:"-webkit-box",flexGrow:1,fontSize:30,lineHeight:1,marginBottom:0,marginTop:40,textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:a})]}),(0,r.jsx)("div",{style:{alignItems:"flex-end",display:"flex",flexShrink:0,height:"38px",justifyContent:"center",width:"38px"},children:h})]})},z=(0,w.fileURLToPath)("file:///home/node/app/node_modules/.pnpm/@payloadcms+next@3.69.0_@types+react@19.2.1_graphql@16.10.0_monaco-editor@0.52.2_next@1_7af855536525a9d4fc8c1fc11331c718/node_modules/@payloadcms/next/dist/routes/rest/og/index.js"),A=v.dirname(z),B=async a=>{let b=a.payload.config;if("off"===b.admin.meta.defaultOGImageType)return Response.json({error:"Open Graph images are disabled"},{status:400});try{let c,{searchParams:d}=new URL(a.url),e=d.has("title")?d.get("title")?.slice(0,100):"",f=d.has("leader")?d.get("leader")?.slice(0,100).replace("-"," "):"",g=d.has("description")?d.get("description"):"";try{c=t.readFile(v.join(A,"roboto-regular.woff"))}catch(b){a.payload.logger.error(`Error reading font file or not readable: ${b.message}`)}return new u.f((0,r.jsx)(y,{description:g,Fallback:s.Ou,fontFamily:"Roboto, sans-serif",Icon:b.admin?.components?.graphics?.Icon,importMap:a.payload.importMap,leader:f,title:e}),{...c?{fonts:[{name:"Roboto",data:await c,style:"normal",weight:400}]}:{},height:630,width:1200})}catch(b){return a.payload.logger.error(`Error generating Open Graph image: ${b.message}`),Response.json({error:`Internal Server Error: ${b.message}`},{status:500})}},C=!1,D=a=>async(b,c)=>{let d=await a;!1!==C||d.endpoints.some(a=>"/og"===a.path&&"get"===a.method)||d.endpoints.push({handler:B,method:"get",path:"/og"}),C=!0;let e=await c.params;return await q({config:a,path:(0,g.Q)({apiRoute:d.routes.api,path:e?`/${e.slug.join("/")}`:void 0}),request:b})},E=D,F=D,G=D,H=D,I=D,J=D},64826:(a,b,c)=>{Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(99258),e=c(25231),f=c(56368);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}}};