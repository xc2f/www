exports.id=6150,exports.ids=[6150],exports.modules={7080:()=>{},11882:a=>{function b(a){return Promise.resolve().then(()=>{var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b})}b.keys=()=>[],b.resolve=b,b.id=11882,a.exports=b},19119:(a,b,c)=>{"use strict";c.d(b,{_:()=>d});let d=()=>"http://localhost:3000"},40577:()=>{},68843:a=>{function b(a){return Promise.resolve().then(()=>{var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b})}b.keys=()=>[],b.resolve=b,b.id=68843,a.exports=b},86508:(a,b,c)=>{"use strict";c.d(b,{A:()=>aA});var d=c(77918),e=c(9288),f=c.n(e),g=c(33873),h=c.n(g),i=c(34111),j=c(79551),k=c(72146),l=c(18154),m=c(57601),n=c(75042);let o=a=>{let b=process.env[a];if(!b)throw Error(`Missing environment variable: ${a}`);return b},p=new n.Z({region:o("AWS_SERVICE_REGION"),credentials:{accessKeyId:o("AWS_ACCESS_KEY"),secretAccessKey:o("AWS_ACCESS_SECRET")}}),q=l.createTransport({SES:{sesClient:p,SendEmailCommand:m.m}}),r=()=>!0,s=({req:{user:a}})=>!!a;var t=c(8181);let u={slug:"categories",access:{create:s,delete:s,read:r,update:s},admin:{useAsTitle:"title"},fields:[{name:"title",type:"text",required:!0},(0,t.O)({position:void 0})]};var v=c(2689),w=c(40456),x=c(16605);let y=(0,j.fileURLToPath)("file:///home/node/app/src/collections/Media.ts"),z=h().dirname(y),A={slug:"media",folders:!0,access:{create:s,delete:s,read:r,update:s},admin:{group:"Media"},fields:[{name:"alt",type:"text"},{name:"caption",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,w.k)(),(0,x.X)()]})}],upload:{staticDir:h().resolve(z,"../../public/media"),adminThumbnail:"thumbnail",focalPoint:!0,imageSizes:[{name:"thumbnail",width:300},{name:"medium",width:900},{name:"large",width:1400},{name:"og",width:1200,height:630,crop:"center"}]}},B=({req:{user:a}})=>!!a||{_status:{equals:"published"}};var C=c(43918);let D={slug:"archive",interfaceName:"ArchiveBlock",fields:[{name:"introContent",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]}),(0,w.k)(),(0,x.X)()]}),label:"Intro Content"},{name:"populateBy",type:"select",defaultValue:"collection",options:[{label:"Collection",value:"collection"},{label:"Individual Selection",value:"selection"}]},{name:"relationTo",type:"select",admin:{condition:(a,b)=>"collection"===b.populateBy},defaultValue:"posts",label:"Collections To Show",options:[{label:"Posts",value:"posts"}]},{name:"categories",type:"relationship",admin:{condition:(a,b)=>"collection"===b.populateBy},hasMany:!0,label:"Categories To Show",relationTo:"categories"},{name:"limit",type:"number",admin:{condition:(a,b)=>"collection"===b.populateBy,step:1},defaultValue:10,label:"Limit"},{name:"selectedDocs",type:"relationship",admin:{condition:(a,b)=>"selection"===b.populateBy},hasMany:!0,label:"Selection",relationTo:["posts"]}],labels:{plural:"Archives",singular:"Archive"}};function E(a){return"object"==typeof a&&!Array.isArray(a)}function F(a,b){let c={...a};return E(a)&&E(b)&&Object.keys(b).forEach(d=>{E(b[d])&&d in a?c[d]=F(a[d],b[d]):Object.assign(c,{[d]:b[d]})}),c}let G={default:{label:"Default",value:"default"},outline:{label:"Outline",value:"outline"}},H=({appearances:a,disableLabel:b=!1,overrides:c={}}={})=>{let d={name:"link",type:"group",admin:{hideGutter:!0},fields:[{type:"row",fields:[{name:"type",type:"radio",admin:{layout:"horizontal",width:"50%"},defaultValue:"reference",options:[{label:"Internal link",value:"reference"},{label:"Custom URL",value:"custom"}]},{name:"newTab",type:"checkbox",admin:{style:{alignSelf:"flex-end"},width:"50%"},label:"Open in new tab"}]}]},e=[{name:"reference",type:"relationship",admin:{condition:(a,b)=>b?.type==="reference"},label:"Document to link to",relationTo:["pages","posts"],required:!0},{name:"url",type:"text",admin:{condition:(a,b)=>b?.type==="custom"},label:"Custom URL",required:!0}];if(b?d.fields=[...d.fields,...e]:(e.map(a=>({...a,admin:{...a.admin,width:"50%"}})),d.fields.push({type:"row",fields:[...e,{name:"label",type:"text",admin:{width:"50%"},label:"Label",required:!0}]})),!1!==a){let b=[G.default,G.outline];a&&(b=a.map(a=>G[a])),d.fields.push({name:"appearance",type:"select",admin:{description:"Choose how the link should be rendered."},defaultValue:"default",options:b})}return F(d,c)},I=({appearances:a,overrides:b={}}={})=>F({name:"links",type:"array",fields:[H({appearances:a})],admin:{initCollapsed:!0}},b),J={slug:"cta",interfaceName:"CallToActionBlock",fields:[{name:"richText",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]}),(0,w.k)(),(0,x.X)()]}),label:!1},I({appearances:["default","outline"],overrides:{maxRows:2}})],labels:{plural:"Calls to Action",singular:"Call to Action"}},K=[{name:"size",type:"select",defaultValue:"oneThird",options:[{label:"One Third",value:"oneThird"},{label:"Half",value:"half"},{label:"Two Thirds",value:"twoThirds"},{label:"Full",value:"full"}]},{name:"richText",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h2","h3","h4"]}),(0,w.k)(),(0,x.X)()]}),label:!1},{name:"enableLink",type:"checkbox"},H({overrides:{admin:{condition:(a,b)=>!!b?.enableLink}}})],L={slug:"formBlock",interfaceName:"FormBlock",fields:[{name:"form",type:"relationship",relationTo:"forms",required:!0},{name:"enableIntro",type:"checkbox",label:"Enable Intro Content"},{name:"introContent",type:"richText",admin:{condition:(a,{enableIntro:b})=>!!b},editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]}),(0,w.k)(),(0,x.X)()]}),label:"Intro Content"}],graphQL:{singularName:"FormBlock"},labels:{plural:"Form Blocks",singular:"Form Block"}},M={slug:"mediaBlock",interfaceName:"MediaBlock",fields:[{name:"media",type:"upload",relationTo:"media",required:!0}]},N={name:"hero",type:"group",fields:[{name:"type",type:"select",defaultValue:"lowImpact",label:"Type",options:[{label:"None",value:"none"},{label:"High Impact",value:"highImpact"},{label:"Medium Impact",value:"mediumImpact"},{label:"Low Impact",value:"lowImpact"}],required:!0},{name:"richText",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]}),(0,w.k)(),(0,x.X)()]}),label:!1},I({overrides:{maxRows:2}}),{name:"media",type:"upload",admin:{condition:(a,{type:b}={})=>["highImpact","mediumImpact"].includes(b)},relationTo:"media",required:!0}],label:!1},O={posts:"/posts",pages:""},P=({collection:a,slug:b})=>{if(null==b)return null;let c=encodeURIComponent(b),d=new URLSearchParams({slug:c,collection:a,path:`${O[a]}/${c}`,previewSecret:process.env.PREVIEW_SECRET||""});return`/next/preview?${d.toString()}`};var Q=c(97703),R=c(110),S=c(6642),T=c(41745),U=c(9174),V=c(17331);let W={slug:"pages",access:{create:s,delete:s,read:B,update:s},defaultPopulate:{title:!0,slug:!0},admin:{defaultColumns:["title","slug","updatedAt"],livePreview:{url:({data:a,req:b})=>P({slug:a?.slug,collection:"pages",req:b})},preview:(a,{req:b})=>P({slug:a?.slug,collection:"pages",req:b}),useAsTitle:"title"},fields:[{name:"title",type:"text",required:!0},{type:"tabs",tabs:[{fields:[N],label:"Hero"},{fields:[{name:"layout",type:"blocks",blocks:[J,{slug:"content",interfaceName:"ContentBlock",fields:[{name:"columns",type:"array",admin:{initCollapsed:!0},fields:K}]},M,D,L],required:!0,admin:{initCollapsed:!0}}],label:"Content"},{name:"meta",label:"SEO",fields:[(0,R.E)({titlePath:"meta.title",descriptionPath:"meta.description",imagePath:"meta.image"}),(0,S.W)({hasGenerateFn:!0}),(0,T.z)({relationTo:"media"}),(0,U.k)({}),(0,V.r)({hasGenerateFn:!0,titlePath:"meta.title",descriptionPath:"meta.description"})]}]},{name:"publishedAt",type:"date",admin:{position:"sidebar"}},(0,t.O)()],hooks:{afterChange:[({doc:a,previousDoc:b,req:{payload:c,context:d}})=>{if(!d.disableRevalidate){if("published"===a._status){let b="home"===a.slug?"/":`/${a.slug}`;c.logger.info(`Revalidating page at path: ${b}`),(0,Q.revalidatePath)(b),(0,Q.revalidateTag)("pages-sitemap")}if(b?._status==="published"&&"published"!==a._status){let a="home"===b.slug?"/":`/${b.slug}`;c.logger.info(`Revalidating old page at path: ${a}`),(0,Q.revalidatePath)(a),(0,Q.revalidateTag)("pages-sitemap")}}return a}],beforeChange:[({data:a,operation:b,req:c})=>{if(("create"===b||"update"===b)&&c.data&&!c.data.publishedAt){let b=new Date;return{...a,publishedAt:b}}return a}],afterDelete:[({doc:a,req:{context:b}})=>{if(!b.disableRevalidate){let b=a?.slug==="home"?"/":`/${a?.slug}`;(0,Q.revalidatePath)(b),(0,Q.revalidateTag)("pages-sitemap")}return a}]},versions:{drafts:{autosave:{interval:100},schedulePublish:!0},maxPerDoc:50}};var X=c(84351),Y=c(72218);let Z={slug:"banner",fields:[{name:"style",type:"select",defaultValue:"info",options:[{label:"Info",value:"info"},{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Success",value:"success"}],required:!0},{name:"content",type:"richText",editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,w.k)(),(0,x.X)()]}),label:!1,required:!0}],interfaceName:"BannerBlock"},$={slug:"code",interfaceName:"CodeBlock",fields:[{name:"language",type:"select",defaultValue:"typescript",options:[{label:"Typescript",value:"typescript"},{label:"Javascript",value:"javascript"},{label:"CSS",value:"css"}]},{name:"code",type:"code",label:!1,required:!0}]},_=async({doc:a,req:b,req:{payload:c}})=>{if(a?.authors&&a?.authors?.length>0){let b=[];for(let d of a.authors)try{let e=await c.findByID({id:"object"==typeof d?d?.id:d,collection:"users",depth:0});e&&b.push(e),b.length>0&&(a.populatedAuthors=b.map(a=>({id:a.id,name:a.name})))}catch{}}return a},aa={slug:"posts",access:{create:s,delete:s,read:B,update:s},defaultPopulate:{title:!0,slug:!0,categories:!0,meta:{image:!0,description:!0}},admin:{defaultColumns:["title","slug","updatedAt"],livePreview:{url:({data:a,req:b})=>P({slug:a?.slug,collection:"posts",req:b})},preview:(a,{req:b})=>P({slug:a?.slug,collection:"posts",req:b}),useAsTitle:"title"},fields:[{name:"title",type:"text",required:!0,localized:!0},{type:"tabs",tabs:[{fields:[{name:"heroImage",type:"upload",relationTo:"media"},{name:"content",type:"richText",localized:!0,editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]}),(0,X.Z)({blocks:[Z,$,M]}),(0,w.k)(),(0,x.X)(),(0,Y.h)()]}),label:!1,required:!0}],label:"Content"},{fields:[{name:"relatedPosts",type:"relationship",admin:{position:"sidebar"},filterOptions:({id:a})=>({id:{not_in:[a]}}),hasMany:!0,relationTo:"posts"},{name:"categories",type:"relationship",admin:{position:"sidebar"},hasMany:!0,relationTo:"categories"}],label:"Meta"},{name:"meta",label:"SEO",fields:[(0,R.E)({titlePath:"meta.title",descriptionPath:"meta.description",imagePath:"meta.image"}),(0,S.W)({hasGenerateFn:!0}),(0,T.z)({relationTo:"media"}),(0,U.k)({}),(0,V.r)({hasGenerateFn:!0,titlePath:"meta.title",descriptionPath:"meta.description"})]}]},{name:"publishedAt",type:"date",admin:{date:{pickerAppearance:"dayAndTime"},position:"sidebar"},hooks:{beforeChange:[({siblingData:a,value:b})=>"published"!==a._status||b?b:new Date]}},{name:"authors",type:"relationship",admin:{position:"sidebar"},hasMany:!0,relationTo:"users"},{name:"populatedAuthors",type:"array",access:{update:()=>!1},admin:{disabled:!0,readOnly:!0},fields:[{name:"id",type:"text"},{name:"name",type:"text"}]},(0,t.O)()],hooks:{afterChange:[({doc:a,previousDoc:b,req:{payload:c,context:d}})=>{if(!d.disableRevalidate){if("published"===a._status){let b=`/posts/${a.slug}`;c.logger.info(`Revalidating post at path: ${b}`),(0,Q.revalidatePath)(b),(0,Q.revalidateTag)("posts-sitemap")}if("published"===b._status&&"published"!==a._status){let a=`/posts/${b.slug}`;c.logger.info(`Revalidating old post at path: ${a}`),(0,Q.revalidatePath)(a),(0,Q.revalidateTag)("posts-sitemap")}}return a}],afterRead:[_],afterDelete:[({doc:a,req:{context:b}})=>{if(!b.disableRevalidate){let b=`/posts/${a?.slug}`;(0,Q.revalidatePath)(b),(0,Q.revalidateTag)("posts-sitemap")}return a}]},versions:{drafts:{autosave:{interval:100},schedulePublish:!0},maxPerDoc:50}},ab={slug:"notes",admin:{useAsTitle:"title",group:"Tools"},access:{create:s,read:s,update:s,delete:s},fields:[{name:"title",type:"text",required:!0},{name:"content",type:"blocks",admin:{initCollapsed:!0},blocks:[{slug:"text",fields:[{name:"text",type:"textarea"}]},$]}],versions:{drafts:!0}},ac={slug:"feeds",access:{create:s,delete:s,read:r,update:s},admin:{useAsTitle:"title",group:"Tools"},fields:[{name:"title",type:"text",required:!0},{name:"feedUrl",type:"text",label:"Feed URL",admin:{readOnly:!0,description:`自动生成，格式为 http://localhost:3000/api/feeds/for/{slug}`}},{name:"enabled",type:"checkbox",defaultValue:!0},{name:"json",type:"json"},{name:"body",type:"textarea",admin:{rows:20}},(0,t.O)({position:void 0})],hooks:{beforeValidate:[({data:a})=>(a?.slug&&(a.feedUrl=`http://localhost:3000/api/feeds/for/${a.slug}${a.json?"?json":""}`),a)]},endpoints:[{path:"/for/:slug",method:"get",handler:async a=>{let b="string"==typeof a.routeParams?.slug?a.routeParams.slug:void 0;if(!b)return Response.json({message:"Slug is required"},{status:400});let{json:c}=a.query,d=a.payload,e=await d.find({collection:"feeds",where:{slug:{equals:b},enabled:{equals:!0},_status:{equals:"published"}},limit:1});if(!e.docs.length)return Response.json({message:"Feed not found"},{status:404});let f=e.docs[0];return void 0!==c?Response.json(f.json??{},{status:200}):new Response(f.body??"",{status:200,headers:{"Content-Type":"text/plain; charset=utf-8"}})}}],versions:{drafts:!0}},ad={slug:"mails",admin:{useAsTitle:"subject",defaultColumns:["subject","to","sendStatus","createdAt"],group:"Tools"},access:{create:s,read:s,update:s,delete:s},fields:[{name:"from",type:"group",required:!0,fields:[{type:"row",fields:[{name:"name",type:"text",defaultValue:process.env.EMAIL_DEFAULT_FROM_NAME},{name:"address",type:"email",required:!0,defaultValue:process.env.EMAIL_DEFAULT_FROM_HI}]}]},{name:"to",type:"array",required:!0,defaultValue:[{address:"",name:""}],fields:[{type:"row",fields:[{name:"address",type:"email",required:!0},{name:"name",type:"text"}]}]},{name:"showAdvanced",type:"checkbox",label:"Show advanced options (cc / bcc / reply-to)",defaultValue:!1},{name:"cc",type:"array",admin:{condition:(a,b)=>b?.showAdvanced},defaultValue:[{address:"",name:""}],fields:[{type:"row",fields:[{name:"address",type:"email"},{name:"name",type:"text"}]}]},{name:"bcc",type:"array",admin:{condition:(a,b)=>b?.showAdvanced},defaultValue:[{address:"",name:""}],fields:[{type:"row",fields:[{name:"address",type:"email"},{name:"name",type:"text"}]}]},{name:"replyTo",type:"email",admin:{condition:(a,b)=>b?.showAdvanced}},{type:"ui",name:"divider-advanced",admin:{components:{Field:"@/components/Divider/index.tsx"}}},{name:"subject",type:"text",required:!0},{name:"text",type:"textarea",admin:{rows:10}},{name:"html",type:"code",admin:{language:"html",description:"HTML content (takes precedence over text)"}},{name:"attachments",type:"array",fields:[{name:"file",type:"upload",relationTo:"media",required:!0}]},{name:"at",type:"date",admin:{position:"sidebar",date:{pickerAppearance:"dayAndTime",displayFormat:"yyyy-MM-dd HH:mm:ss",minDate:new Date}}},{name:"sendStatus",type:"select",defaultValue:"pending",required:!0,options:[{label:"Pending",value:"pending"},{label:"Sent",value:"sent"},{label:"Failed",value:"failed"}],admin:{position:"sidebar"}},{name:"result",type:"textarea",admin:{position:"sidebar",readOnly:!0}}],hooks:{afterChange:[async({doc:a,req:b})=>{let{sendStatus:c,_status:d}=a;if("sent"===c||"draft"===d)return a;await b.payload.jobs.queue({task:"send-email",req:b,input:a,waitUntil:a.at?new Date(a.at):void 0})}]},versions:{drafts:!0}},ae={slug:"users",access:{admin:s,create:s,delete:s,read:s,update:s},admin:{defaultColumns:["name","email"],useAsTitle:"name",group:"System"},auth:!0,fields:[{name:"name",type:"text"}],timestamps:!0},af={slug:"footer",access:{read:()=>!0},fields:[{name:"navItems",type:"array",fields:[H({appearances:!1})],maxRows:6,admin:{initCollapsed:!0,components:{RowLabel:"@/Footer/RowLabel#RowLabel"}}}],hooks:{afterChange:[({doc:a,req:{payload:b,context:c}})=>(c.disableRevalidate||(b.logger.info("Revalidating footer"),(0,Q.revalidateTag)("global_footer")),a)]}},ag={slug:"header",access:{read:()=>!0},fields:[{name:"navItems",type:"array",fields:[H({appearances:!1})],maxRows:6,admin:{initCollapsed:!0,components:{RowLabel:"@/Header/RowLabel#RowLabel"}}}],hooks:{afterChange:[({doc:a,req:{payload:b,context:c}})=>(c.disableRevalidate||(b.logger.info("Revalidating header"),(0,Q.revalidateTag)("global_header")),a)]}};var ah=c(33934),ai=c(61817),aj=c(68982),ak=c(50497),al=c(20112);let am=[{name:"slug",type:"text",index:!0,admin:{readOnly:!0}},{name:"meta",label:"Meta",type:"group",index:!0,admin:{readOnly:!0},fields:[{type:"text",name:"title",label:"Title"},{type:"text",name:"description",label:"Description"},{name:"image",label:"Image",type:"upload",relationTo:"media"}]},{label:"Categories",name:"categories",type:"array",admin:{readOnly:!0},fields:[{name:"relationTo",type:"text"},{name:"categoryID",type:"text"},{name:"title",type:"text"}]}],an=async({req:a,originalDoc:b,searchDoc:c})=>{let{doc:{relationTo:d}}=c,{slug:e,id:f,categories:g,title:h,meta:i}=b,j={...c,slug:e,meta:{...i,title:i?.title||h,image:i?.image?.id||i?.image,description:i?.description},categories:[]};if(g&&Array.isArray(g)&&g.length>0){let b=[];for(let c of g){if(!c)continue;if("object"==typeof c){b.push(c);continue}let e=await a.payload.findByID({collection:"categories",id:c,disableErrors:!0,depth:0,select:{title:!0},req:a});null!==e?b.push(e):console.error(`Failed. Category not found when syncing collection '${d}' with id: '${f}' to search.`)}j.categories=b.map(a=>({relationTo:"categories",categoryID:String(a.id),title:a.title}))}return j};var ao=c(19119);let ap=[(0,aj.fn)({collections:["pages","posts"],overrides:{admin:{group:"System"},fields:({defaultFields:a})=>a.map(a=>"name"in a&&"from"===a.name?{...a,admin:{description:"You will need to rebuild the website when changing this field."}}:a),hooks:{afterChange:[({doc:a,req:{payload:b}})=>(b.logger.info("Revalidating redirects"),(0,Q.revalidateTag)("redirects"),a)]}}}),(0,ai.MK)({collections:["categories"],generateURL:a=>a.reduce((a,b)=>`${a}/${b.slug}`,"")}),(0,ak.x)({generateTitle:({doc:a})=>a?.title?`${a.title} | Payload Website Template`:"Payload Website Template",generateURL:({doc:a})=>{let b=(0,ao._)();return a?.slug?`${b}/${a.slug}`:b}}),(0,ah.jR)({fields:{payment:!1},formOverrides:{admin:{group:"Form"},fields:({defaultFields:a})=>a.map(a=>"name"in a&&"confirmationMessage"===a.name?{...a,editor:(0,v.qf)({features:({rootFeatures:a})=>[...a,(0,w.k)(),(0,C.b)({enabledHeadingSizes:["h1","h2","h3","h4"]})]})}:a)},formSubmissionOverrides:{admin:{group:"Form"}}}),(0,al.u)({collections:["posts"],beforeSync:an,searchOverrides:{fields:({defaultFields:a})=>[...a,...am]}})];var aq=c(38933),ar=c(45388),as=c(50100),at=c(87995),au=c(79936);let av=(0,v.qf)({features:[(0,aq.$)(),(0,ar.D)(),(0,as.k)(),(0,at.v)(),(0,au.T)({enabledCollections:["pages","posts"],fields:({defaultFields:a})=>[...a.filter(a=>!("name"in a)||"url"!==a.name),{name:"url",type:"text",admin:{condition:(a,b)=>b?.linkType!=="internal"},label:({t:a})=>a("fields:enterURL"),required:!0,validate:(a,b)=>b?.siblingData?.linkType==="internal"||!!a||"URL is required"}]})]});var aw=c(7282),ax=c(26119);let ay=(0,j.fileURLToPath)("file:///home/node/app/src/payload.config.ts"),az=h().dirname(ay),aA=(0,i.f)({admin:{components:{beforeLogin:["@/components/BeforeLogin"],beforeDashboard:["@/components/BeforeDashboard"]},importMap:{baseDir:h().resolve(az)},user:ae.slug,dateFormat:"yyyy-MM-dd HH:mm:ss",livePreview:{breakpoints:[{label:"Mobile",name:"mobile",width:375,height:667},{label:"Tablet",name:"tablet",width:768,height:1024},{label:"Desktop",name:"desktop",width:1440,height:900}]},autoLogin:!1},editor:av,db:(0,d.V8)({pool:{connectionString:process.env.DATABASE_URL}}),collections:[W,aa,A,u,ab,ac,ad,ae],cors:[(0,ao._)()].filter(Boolean),globals:[ag,af],plugins:ap,secret:process.env.PAYLOAD_SECRET,sharp:f(),typescript:{outputFile:h().resolve(az,"payload-types.ts")},jobs:{access:{run:({req:a})=>!!a.user||a.headers.get("authorization")===`Bearer ${process.env.CRON_SECRET}`},tasks:[{slug:"send-email",retries:2,handler:async({input:a,req:b})=>{let c=b.payload;if("sent"===(await c.findByID({collection:"mails",id:a.id})).sendStatus)return;let d=a=>{let b=new Date().toISOString();return`${b}
${a}`},e=async()=>{let{attachments:b=[]}=a,d=b.map(a=>a.file?.id||a?.file||a).filter(Boolean);if(!d.length)return[];let e=await c.find({collection:"media",where:{id:{in:d}},limit:b.length});return(e?.docs||[]).filter(a=>a?.url).map(a=>({filename:a.filename,path:`http://localhost:3000${a.url}`,contentType:a.mimeType??"application/octet-stream"}))};try{return await c.sendEmail({...a,attachments:await e()}),await c.update({collection:"mails",id:a.id,data:{sendStatus:"sent",result:d("ok")}}),{output:{emailSent:!0}}}catch(c){throw await b.payload.update({collection:"mails",id:a.id,data:{sendStatus:"failed",result:d(c instanceof Error?c.message:String(c))}}),c}}}],autoRun:[{cron:"* * * * *",limit:100}],jobsCollectionOverrides:({defaultJobsCollection:a})=>(a.admin||(a.admin={}),a.admin.hidden=!1,a)},email:(0,k.y)({defaultFromAddress:process.env.EMAIL_DEFAULT_FROM_NO_REPLY,defaultFromName:process.env.EMAIL_DEFAULT_FROM_NAME,transport:q}),i18n:{supportedLanguages:{en:aw.en,zh:ax.zh}},localization:{locales:[{label:"Chinese",code:"zh"},{label:"English",code:"en"}],defaultLocale:"zh"}})}};