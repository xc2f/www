"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1083],{71083:(e,a,l)=>{l.r(a),l.d(a,{RelationshipComponent:()=>v});var t=l(16296),o=l(24736),s=l(73627),n=l(30857),c=l(28697),i=l(87101),r=l(84274),u=l(94490),d=l(33839),p=l(72808),h=l(58230),m=l(91403),b={depth:0},v=e=>{var a,l,v;let{className:_,data:{relationTo:g,value:f},nodeKey:j}=e;if("object"==typeof f)throw Error("Relationship value should be a string or number. The Lexical Relationship component should not receive the populated value object.");let w=(0,m.useRef)(null),[x]=(0,n.DF)(),N=(0,c.a)(),{config:{routes:{api:R},serverURL:C},getEntityConfig:k}=(0,r.c)(),[D]=(0,m.useState)(()=>k({collectionSlug:g})),{i18n:y,t:S}=(0,u.d)(),[B,E]=(0,m.useReducer)(e=>e+1,0),[{data:P},{setParams:T}]=(0,d.usePayloadAPI)((0,h.Q)({apiRoute:R,path:"/".concat(D.slug,"/").concat(f),serverURL:C}),{initialParams:b}),{closeDocumentDrawer:L,DocumentDrawer:A,DocumentDrawerToggler:K}=(0,o.a)({id:f,collectionSlug:D.slug}),U=(0,m.useCallback)(()=>{x.update(()=>{var e;null==(e=(0,p.nsf)(j))||e.remove()})},[x,j]),F=m.useCallback(()=>{T({...b,cacheBust:B}),L(),E()},[B,T,L]);return(0,s.jsxs)("div",{className:"".concat(_,"__contents"),contentEditable:!1,ref:w,children:[(0,s.jsxs)("div",{className:"".concat(_,"__wrap"),children:[(0,s.jsx)("p",{className:"".concat(_,"__label"),children:S("fields:labelRelationship",{label:(null==(a=D.labels)?void 0:a.singular)?(0,i.s)(null==(l=D.labels)?void 0:l.singular,y):D.slug})}),(0,s.jsx)(K,{className:"".concat(_,"__doc-drawer-toggler"),children:(0,s.jsx)("p",{className:"".concat(_,"__title"),children:P?P[(null==D||null==(v=D.admin)?void 0:v.useAsTitle)||"id"]:f})})]}),N&&(0,s.jsxs)("div",{className:"".concat(_,"__actions"),children:[(0,s.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(_,"__swapButton"),disabled:!N,el:"button",icon:"swap",onClick:()=>{j&&x.dispatchCommand(t.a,{replace:{nodeKey:j}})},round:!0,tooltip:S("fields:swapRelationship")}),(0,s.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(_,"__removeButton"),disabled:!N,icon:"x",onClick:e=>{e.preventDefault(),U()},round:!0,tooltip:S("fields:removeRelationship")})]}),!!f&&(0,s.jsx)(A,{onSave:F})]})}}}]);