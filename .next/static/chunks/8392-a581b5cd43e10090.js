"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8392],{4385:(e,t,a)=>{a.d(t,{ForgotPasswordForm:()=>u});var i=a(96221),l=a(73627),n=a(84274),r=a(94490),s=a(33839),o=a(13308),d=a(91403);function c({description:e,heading:t}){return t?(0,l.jsxs)("div",{className:"form-header",children:[(0,l.jsx)("h1",{children:t}),!!e&&(0,l.jsx)("p",{children:e})]}):null}let u=()=>{var e;let t,a,u,h,m=(0,i.c)(17),{config:p,getEntityConfig:g}=(0,n.c)(),{admin:f,routes:w}=p,{user:b}=f,{api:v}=w,{t:x}=(0,r.d)(),[y,j]=(0,d.useState)(!1);m[0]!==g||m[1]!==b?(t=g({collectionSlug:b}),m[0]=g,m[1]=b,m[2]=t):t=m[2];let S=t,C=null==S||null==(e=S.auth)?void 0:e.loginWithUsername;m[3]!==C||m[4]!==x?(a=(e,t,a)=>{e.json().then(()=>{j(!0),t(x("general:submissionSuccessful"))}).catch(()=>{a(C?x("authentication:usernameNotValid"):x("authentication:emailNotValid"))})},m[3]=C,m[4]=x,m[5]=a):a=m[5];let F=a;if(m[6]!==v||m[7]!==p||m[8]!==F||m[9]!==y||m[10]!==C||m[11]!==x||m[12]!==b){h=Symbol.for("react.early_return_sentinel");e:{let e=C?{username:{initialValue:"",valid:!0,value:void 0}}:{email:{initialValue:"",valid:!0,value:void 0}};if(y){let e;m[15]!==x?(e=(0,l.jsx)(c,{description:x("authentication:checkYourEmailForPasswordReset"),heading:x("authentication:emailSent")}),m[15]=x,m[16]=e):e=m[16],h=e;break e}u=(0,l.jsxs)(s.Form,{action:"".concat(v,"/").concat(b,"/forgot-password"),handleResponse:F,initialState:e,method:"POST",children:[(0,l.jsx)(c,{description:C?x("authentication:forgotPasswordUsernameInstructions"):x("authentication:forgotPasswordEmailInstructions"),heading:x("authentication:forgotPassword")}),C?(0,l.jsx)(s.TextField,{field:{name:"username",label:x("authentication:username"),required:!0},path:"username",validate:e=>(0,o.Qq)(e,{name:"username",type:"text",blockData:{},data:{},event:"onChange",path:["username"],preferences:{fields:{}},req:{payload:{config:p},t:x},required:!0,siblingData:{}})}):(0,l.jsx)(s.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:x("general:email"),required:!0},path:"email",validate:e=>(0,o.Rp)(e,{name:"email",type:"email",blockData:{},data:{},event:"onChange",path:["email"],preferences:{fields:{}},req:{payload:{config:p},t:x},required:!0,siblingData:{}})}),(0,l.jsx)(s.FormSubmit,{size:"large",children:x("general:submit")})]})}m[6]=v,m[7]=p,m[8]=F,m[9]=y,m[10]=C,m[11]=x,m[12]=b,m[13]=u,m[14]=h}else u=m[13],h=m[14];return h!==Symbol.for("react.early_return_sentinel")?h:u}},4744:(e,t,a)=>{a.d(t,{ResetPreferences:()=>h});var i=a(96221),l=a(73627),n=a(33839),r=a(94490),s=a(84274),o=a(58230),d=a(72968),c=a(91403);let u="confirm-reset-modal",h=e=>{let t,a,h,m=(0,i.c)(9),{user:p}=e,{openModal:g}=(0,n.useModal)(),{t:f}=(0,r.d)(),{config:w}=(0,s.c)(),{routes:b}=w,{api:v}=b;m[0]!==v||m[1]!==p?(t=async()=>{if(!p)return;let e=d.A({depth:0,where:{user:{id:{equals:p.id}}}},{addQueryPrefix:!0});try{let t=await fetch((0,o.Q)({apiRoute:v,path:"/payload-preferences".concat(e)}),{credentials:"include",headers:{"Content-Type":"application/json"},method:"DELETE"}),a=(await t.json()).message;t.ok?n.toast.success(a):n.toast.error(a)}catch(e){}},m[0]=v,m[1]=p,m[2]=t):t=m[2];let x=t;return m[3]!==g?(a=()=>g(u),m[3]=g,m[4]=a):a=m[4],m[5]!==x||m[6]!==f||m[7]!==a?(h=(0,l.jsxs)(c.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.Button,{buttonStyle:"secondary",onClick:a,children:f("general:resetPreferences")})}),(0,l.jsx)(n.ConfirmationModal,{body:f("general:resetPreferencesDescription"),confirmingLabel:f("general:resettingPreferences"),heading:f("general:resetPreferences"),modalSlug:u,onConfirm:x})]}),m[5]=x,m[6]=f,m[7]=a,m[8]=h):h=m[8],h}},5415:(e,t,a)=>{a.d(t,{CreateFirstUserClient:()=>c});var i=a(73627),l=a(84274),n=a(33839),r=a(94490),s=a(11916),o=a(58230),d=a(91403);let c=e=>{let{docPermissions:t,docPreferences:a,initialState:c,loginWithUsername:u,userSlug:h}=e,{config:{routes:{admin:m,api:p}},getEntityConfig:g}=(0,l.c)(),{getFormState:f}=(0,n.useServerFunctions)(),{t:w}=(0,r.d)(),{setUser:b}=(0,n.useAuth)(),v=d.useRef(null),x=g({collectionSlug:h}),y=d.useCallback(async e=>{let{formState:i,submitted:l}=e,n=(0,s.wN)(v),r=await f({collectionSlug:h,docPermissions:t,docPreferences:a,formState:i,operation:"create",schemaPath:h,signal:n.signal,skipValidation:!l});if(v.current=null,r&&r.state)return r.state},[h,f,t,a]);return(0,d.useEffect)(()=>{let e=v.current;return()=>{(0,s.eS)(e)}},[]),(0,i.jsxs)(n.Form,{action:(0,o.Q)({apiRoute:p,path:"/".concat(h,"/first-register")}),initialState:{...c,"confirm-password":{...c["confirm-password"],valid:c["confirm-password"].valid||!1,value:c["confirm-password"].value||""}},method:"POST",onChange:[y],onSuccess:e=>{b(e)},redirect:m,validationOperation:"create",children:[(0,i.jsx)(n.EmailAndUsernameFields,{className:"emailAndUsername",loginWithUsername:u,operation:"create",readOnly:!1,t:w}),(0,i.jsx)(n.PasswordField,{autoComplete:"off",field:{name:"password",label:w("authentication:newPassword"),required:!0},path:"password"}),(0,i.jsx)(n.ConfirmPasswordField,{}),(0,i.jsx)(n.RenderFields,{fields:x.fields,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:h,permissions:!0,readOnly:!1}),(0,i.jsx)(n.FormSubmit,{size:"large",children:w("general:create")})]})}},21235:(e,t,a)=>{a.d(t,{ToastAndRedirect:()=>s});var i=a(96221),l=a(33839),n=a(833),r=a(91403);function s(e){let t,a,s=(0,i.c)(6),{message:o,redirectTo:d}=e,c=(0,n.useRouter)(),{startRouteTransition:u}=(0,l.useRouteTransition)(),h=r.useRef(!1);return s[0]!==o||s[1]!==d||s[2]!==c||s[3]!==u?(t=()=>{let e;return l.toast&&(e=setTimeout(()=>{l.toast.success(o),h.current=!0,u(()=>c.push(d))},100)),()=>{e&&clearTimeout(e)}},a=[c,d,o,u],s[0]=o,s[1]=d,s[2]=c,s[3]=u,s[4]=t,s[5]=a):(t=s[4],a=s[5]),(0,r.useEffect)(t,a),null}},28907:(e,t,a)=>{a.d(t,{ModularDashboardClient:()=>y});var i=a(96221),l=a(73627),n=a(25179),r=a(19128),s=a(94490),o=a(33839),d=a(91403);function c(e){let t,a,n,r=(0,i.c)(15),{addWidget:c,cancel:h,isEditing:m,resetLayout:p,saveLayout:g,setIsEditing:f,widgets:w}=e,{t:b}=(0,s.d)(),{setStepNav:v}=(0,o.useStepNav)(),x=(0,d.useId)(),y="widgets-drawer-".concat(x);return r[0]!==h||r[1]!==y||r[2]!==m||r[3]!==p||r[4]!==g||r[5]!==f||r[6]!==v?(t=()=>{v([{label:(0,l.jsx)(u,{isEditing:m,onCancel:h,onEditClick:()=>f(!0),onResetLayout:p,onSaveChanges:g,widgetsDrawerSlug:y})}])},a=[m,y,h,p,g,f,v],r[0]=h,r[1]=y,r[2]=m,r[3]=p,r[4]=g,r[5]=f,r[6]=v,r[7]=t,r[8]=a):(t=r[7],a=r[8]),(0,d.useEffect)(t,a),r[9]!==c||r[10]!==y||r[11]!==m||r[12]!==b||r[13]!==w?(n=(0,l.jsx)(l.Fragment,{children:m&&(0,l.jsx)(o.ItemsDrawer,{drawerSlug:y,items:w,onItemClick:e=>c(e.slug),searchPlaceholder:b("dashboard:searchWidgets"),title:b("dashboard:addWidget")})}),r[9]=c,r[10]=y,r[11]=m,r[12]=b,r[13]=w,r[14]=n):n=r[14],n}function u(e){let{isEditing:t,onCancel:a,onEditClick:i,onResetLayout:n,onSaveChanges:r,widgetsDrawerSlug:s}=e;return t?(0,l.jsxs)("div",{className:"dashboard-breadcrumb-dropdown__editing",children:[(0,l.jsx)("span",{children:"Editing Dashboard"}),(0,l.jsxs)("div",{className:"dashboard-breadcrumb-dropdown__actions",children:[(0,l.jsx)(o.DrawerToggler,{className:"drawer-toggler--unstyled",slug:s,children:(0,l.jsx)(o.Button,{buttonStyle:"pill",el:"span",size:"small",children:"Add +"})}),(0,l.jsx)(o.Button,{buttonStyle:"pill",onClick:r,size:"small",children:"Save Changes"}),(0,l.jsx)(o.Button,{buttonStyle:"pill",onClick:a,size:"small",children:"Cancel"})]})]}):(0,l.jsx)(o.ReactSelect,{className:"dashboard-breadcrumb-select",isClearable:!1,isSearchable:!1,menuIsOpen:void 0,onChange:e=>{let t=Array.isArray(e)?e[0]:e;(null==t?void 0:t.value)==="edit"?i():(null==t?void 0:t.value)==="reset"&&n()},options:[{label:"Edit Dashboard",value:"edit"},{label:"Reset Layout",value:"reset"}],placeholder:"Dashboard",value:{label:"Dashboard",value:"dashboard"}})}var h=a(37550),m=a(84274);let p=e=>{let t,a,n,r,s=(0,i.c)(9),{widgetId:c}=e,[u,h]=d.useState(null),{serverFunction:p}=(0,o.useServerFunctions)();s[0]!==p||s[1]!==c?(t=()=>{!async function(){try{let e=c.slice(0,c.lastIndexOf("-")),t=await p({name:"render-widget",args:{widgetSlug:e}});h(t.component)}catch(e){h(d.createElement("div",{style:{background:"var(--theme-error-50)",border:"1px solid var(--theme-error-200)",borderRadius:"4px",color:"var(--theme-error-text)",padding:"20px",textAlign:"center"}},"Failed to load widget. Please try again later."))}}()},s[0]=p,s[1]=c,s[2]=t):t=s[2];let g=t,f=(0,d.useRef)(!1);if(s[3]!==g?(a=()=>{f.current||(f.current=!0,g())},n=[g],s[3]=g,s[4]=a,s[5]=n):(a=s[4],n=s[5]),(0,d.useEffect)(a,n),!u){let e;return s[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(m.f,{height:"100%"}),s[6]=e):e=s[6],e}return s[7]!==u?(r=(0,l.jsx)(l.Fragment,{children:u}),s[7]=u,s[8]=r):r=s[8],r},g=e=>{let t,a,i=[];if(e.pointerCoordinates)t=e.pointerCoordinates.x,a=e.pointerCoordinates.y;else{if(!e.collisionRect)return[];t=e.collisionRect.left+e.collisionRect.width/2,a=e.collisionRect.top+e.collisionRect.height/2}for(let l of e.droppableContainers){let n=e.droppableRects.get(l.id);if(n&&a>=n.top&&a<=n.bottom){let e=Math.abs(t-(n.left+n.width/2));i.push({id:String(l.id),data:{value:e}})}}return i.sort((e,t)=>e.data.value-t.data.value)};function f(e,t,a){let i=-1,l=1/0;for(let n=0;n<e.length;n++){let r=e[n];if(r.row===t){let e=Math.abs(r.centerX-a);e<l&&(l=e,i=n)}}return -1===i?null:{droppable:e[i],index:i}}let w=(e,{context:t,currentCoordinates:a})=>{let{collisionRect:i}=t,{code:l}=e;if(!i||!["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(l))return a;e.preventDefault(),t.scrollableAncestors&&(t.scrollableAncestors.length=0);let n=function(){let e=[],t=0,a=null,i=Array.from(document.querySelectorAll(".droppable-widget"));for(let l=0;l<i.length;l++){let n=i[l],r=n.getBoundingClientRect();if(0===r.width||0===r.height)continue;let s=r.left+r.width/2,o=r.top+r.height/2,d=(n.getAttribute("data-testid")||"").endsWith("-before");d&&i.some((e,t)=>{if(t===l)return!1;let a=e.getBoundingClientRect(),i=a.left+a.width/2,n=a.top+a.height/2;return 5>Math.abs(i-s)&&5>Math.abs(n-o)})||(null===a?a=o:Math.abs(o-a)>=10&&(t++,a=o),e.push({centerX:s,centerY:o,element:n,isBeforeDroppable:d,rect:r,row:t}))}return e}();if(0===n.length)return a;let r=i.left+i.width/2,s=i.top+i.height/2,o=function(e,t,a,i){let l=function(e,t){if(0===e.length)return null;let a=e[0].row,i=1/0;for(let l of e){let e=Math.abs(l.centerY-t);e<i&&(i=e,a=l.row)}return a}(e,a);if(null===l)return null;let n=f(e,l,t);if(!n)return null;let{index:r}=n;switch(i){case"ArrowDown":return f(e,l+1,t)?.droppable||null;case"ArrowLeft":return e[r-1]||null;case"ArrowRight":return e[r+1]||null;case"ArrowUp":return f(e,l-1,t)?.droppable||null;default:return null}}(n,r,s,l);if(o){let e=window.innerHeight,t=o.rect,i=t.top<20,l=t.bottom>e-20;if(i){let e=t.top-20;window.scrollBy({behavior:"instant",top:e})}else if(l){let a=t.bottom-e+20;window.scrollBy({behavior:"instant",top:a})}let n=o.element.getBoundingClientRect(),d=n.left+n.width/2,c=n.top+n.height/2,u=d-r,h=c-s;return{x:a.x+u,y:a.y+h}}return a};class b extends n.uN{static activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t={cancel:[n.vL.Esc],end:[n.vL.Space,n.vL.Enter],start:[n.vL.Space,n.vL.Enter]},onActivation:a},{active:i})=>{let{code:l}=e.nativeEvent;return e.target===i.node.current&&!!t.start.includes(l)&&(e.preventDefault(),a?.({event:e.nativeEvent}),!0)}}]}let v=e=>{let{activatorEvent:t}=e;return t&&"key"in t?e.transform:(e=>{let{activatorEvent:t,draggingNodeRect:a,transform:i}=e;if(a&&t){let e=(0,r.e_)(t);if(!e)return i;let l=e.x-a.left,n=e.y-a.top;return{...i,x:i.x+l-a.width/2,y:i.y+n-a.height/2}}return i})(e)},x={"x-small":25,small:1/3*100,medium:50,large:2/3*100,"x-large":75,full:100};function y(e){let t,a=(0,i.c)(21),{clientLayout:r,widgets:u}=e,{t:f}=(0,s.d)(),{addWidget:y,cancel:F,cancelModal:P,currentLayout:_,deleteWidget:k,isEditing:R,moveWidget:N,resetLayout:E,resizeWidget:A,saveLayout:D,setIsEditing:W}=function(e){let t=function(){let{setPreference:e}=(0,o.usePreferences)();return(0,d.useCallback)(async t=>{await e("dashboard-layout",{layouts:t},!1)},[e])}(),[a,i]=(0,d.useState)(!1),{widgets:l=[]}=(0,m.c)().config.admin.dashboard??{},[n,r]=(0,d.useState)(e),{openModal:s}=(0,o.useModal)(),c="cancel-dashboard-changes",{serverFunction:u}=(0,o.useServerFunctions)(),g=(0,d.useCallback)(async()=>{try{let e=n.map(e=>e.item);i(!1),await t(e)}catch{i(!0),o.toast.error("Failed to save layout")}},[t,n]),f=(0,d.useCallback)(async()=>{try{await t(null);let e=await u({name:"get-default-layout",args:{}});r(e.layout),i(!1)}catch{o.toast.error("Failed to reset layout")}},[t,u]),w=(0,d.useCallback)(()=>{r(e),i(!1)},[e]),b=(0,d.useCallback)(()=>{n.length!==e.length||n.some((t,a)=>{let i=e[a];return!i||t.item.id!==i.item.id||t.item.width!==i.item.width})?s(c):w()},[n,e,s,c,w]),v=(0,d.useCallback)(({moveFromIndex:e,moveToIndex:t})=>{e===t||e<0||t<0||r(a=>(0,h.be)(a,e,t))},[]),x=(0,d.useCallback)(e=>{if(!a)return;let t=`${e}-${Date.now()}`,i=l.find(t=>t.slug===e),n={component:d.createElement(p,{widgetId:t}),item:{id:t,maxWidth:i?.maxWidth??"full",minWidth:i?.minWidth??"x-small",width:i?.minWidth??"x-small"}};r(e=>[...e,n]),setTimeout(()=>{let e=document.getElementById(t);if(e){e.scrollIntoView({behavior:"smooth",block:"center"});let t=e.closest(".widget");t&&(t.classList.add("widget--highlight"),setTimeout(()=>{t.classList.remove("widget--highlight")},1500))}},100)},[a,l]),y=(0,d.useCallback)(e=>{a&&r(t=>t.filter(t=>t.item.id!==e))},[a]),j=(0,d.useCallback)((e,t)=>{a&&r(a=>a.map(a=>a.item.id===e?{...a,item:{...a.item,width:t}}:a))},[a]);return{addWidget:x,cancel:b,cancelModal:d.createElement(o.ConfirmationModal,{body:"You have unsaved changes to your dashboard layout. Are you sure you want to discard them?",confirmLabel:"Discard",heading:"Discard changes?",modalSlug:c,onConfirm:w}),currentLayout:n,deleteWidget:y,isEditing:a,moveWidget:v,resetLayout:f,resizeWidget:j,saveLayout:g,setIsEditing:i}}(r),[L,T]=(0,d.useState)(null),I=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:5}}),(0,n.MS)(b,{coordinateGetter:w}));if(a[0]!==L||a[1]!==y||a[2]!==F||a[3]!==P||a[4]!==_||a[5]!==k||a[6]!==R||a[7]!==N||a[8]!==E||a[9]!==A||a[10]!==D||a[11]!==I||a[12]!==W||a[13]!==f||a[14]!==u){let e,i,r;a[16]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{T(null)},a[16]=e):e=a[16],a[17]!==_||a[18]!==N?(i=e=>{if(!e.over)return void T(null);let t=e.over.id,a=t.lastIndexOf("-"),i=t.slice(0,a),l=t.slice(a+1);if(i===e.active.id)return;let n=null==_?void 0:_.findIndex(t=>t.item.id===e.active.id),r=null==_?void 0:_.findIndex(e=>e.item.id===i);n<r&&r--,"after"===l&&r++,N({moveFromIndex:n,moveToIndex:r}),T(null)},a[17]=_,a[18]=N,a[19]=i):i=a[19],a[20]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{T(e.active.id)},a[20]=r):r=a[20],t=(0,l.jsxs)("div",{children:[(0,l.jsx)(n.Mp,{autoScroll:{enabled:!0,threshold:{x:0,y:.2}},collisionDetection:g,id:"dashboard-dnd-context",onDragCancel:e,onDragEnd:i,onDragStart:r,sensors:I,children:(0,l.jsxs)("div",{className:"modular-dashboard ".concat(R?"editing":""),style:{display:"flex",flexWrap:"wrap"},children:[(null==_?void 0:_.length)===0&&(0,l.jsx)("div",{className:"modular-dashboard__empty",children:(0,l.jsx)("p",{children:'There are no widgets on your dashboard. You can add them from the "Dashboard" menu located in the top bar.'})}),null==_?void 0:_.map((e,t)=>(0,l.jsx)(d.Fragment,{children:(0,l.jsx)(C,{disabled:!R,id:e.item.id,style:{width:"".concat(x[e.item.width],"%"),padding:"6px"},width:e.item.width,children:(0,l.jsxs)("div",{className:"widget-wrapper ".concat(R?"widget-wrapper--editing":""),children:[(0,l.jsx)("div",{"aria-hidden":R,className:"widget-content",inert:R,children:e.component}),R&&(0,l.jsxs)("div",{className:"widget-wrapper__controls",onPointerDown:j,children:[(0,l.jsx)(S,{currentWidth:e.item.width,maxWidth:e.item.maxWidth,minWidth:e.item.minWidth,onResize:t=>A(e.item.id,t)}),(0,l.jsxs)("button",{className:"widget-wrapper__delete-btn",onClick:()=>k(e.item.id),type:"button",children:[(0,l.jsx)("span",{className:"sr-only",children:f("dashboard:deleteWidget",{id:e.item.id})}),(0,l.jsx)(s.a,{})]})]})]})})},e.item.id)),(0,l.jsx)(n.Hd,{className:"drag-overlay",dropAnimation:{duration:100},modifiers:[v],children:L?(()=>{let e=null==_?void 0:_.find(e=>e.item.id===L);return e?(0,l.jsx)("div",{style:{transform:"scale(0.25)"},children:(0,l.jsx)("div",{className:"widget-wrapper ".concat(R?"widget-wrapper--editing":""),children:(0,l.jsx)("div",{className:"widget-content",children:e.component})})}):null})():null})]})}),(0,l.jsx)(c,{addWidget:y,cancel:F,isEditing:R,resetLayout:E,saveLayout:D,setIsEditing:W,widgets:u}),P]}),a[0]=L,a[1]=y,a[2]=F,a[3]=P,a[4]=_,a[5]=k,a[6]=R,a[7]=N,a[8]=E,a[9]=A,a[10]=D,a[11]=I,a[12]=W,a[13]=f,a[14]=u,a[15]=t}else t=a[15];return t}function j(e){return e.stopPropagation()}function S(e){let{currentWidth:t,maxWidth:a,minWidth:i,onResize:n}=e,r=(0,d.useMemo)(()=>{let e=x[i],t=x[a];return Object.entries(x).map(e=>{let[t,a]=e;return{width:t,percentage:a}}).filter(a=>a.percentage>=e&&a.percentage<=t)},[i,a]),s=r.length<=1;return(0,l.jsx)(o.Popup,{button:(0,l.jsxs)("button",{className:"widget-wrapper__size-btn",disabled:s,onPointerDown:e=>e.stopPropagation(),type:"button",children:[(0,l.jsx)("span",{className:"widget-wrapper__size-btn-text",children:t}),(0,l.jsx)(o.ChevronIcon,{className:"widget-wrapper__size-btn-icon"})]}),buttonType:"custom",disabled:s,render:e=>{let{close:a}=e;return(0,l.jsx)(o.PopupList.ButtonGroup,{children:r.map(e=>{let i=e.width===t;return(0,l.jsxs)(o.PopupList.Button,{active:i,onClick:()=>{n(e.width),a()},children:[(0,l.jsx)("span",{className:"widget-wrapper__size-btn-label",children:e.width}),(0,l.jsxs)("span",{className:"widget-wrapper__size-btn-percentage",children:[e.percentage.toFixed(0),"%"]})]},e.width)})})},size:"small",verticalAlign:"bottom"})}function C(e){let t,a,r=(0,i.c)(13);r[0]!==e.disabled||r[1]!==e.id?(t={id:e.id,disabled:e.disabled},r[0]=e.disabled,r[1]=e.id,r[2]=t):t=r[2];let{attributes:s,isDragging:o,listeners:d,setNodeRef:c}=(0,n.PM)(t),u=o?.3:1;if(r[3]!==s||r[4]!==d||r[5]!==e.children||r[6]!==e.disabled||r[7]!==e.id||r[8]!==e.style||r[9]!==e.width||r[10]!==c||r[11]!==u){let t={...e.style,opacity:u,position:"relative"},i=e.disabled?{}:{...d,...s};a=(0,l.jsxs)("div",{className:"widget","data-slug":e.id,"data-width":e.width,style:t,children:[(0,l.jsx)(F,{id:e.id,position:"before"}),(0,l.jsx)("div",{className:"draggable",id:e.id,ref:c,...i,style:{width:"100%",height:"100%"},children:e.children}),(0,l.jsx)(F,{id:e.id,position:"after"})]}),r[3]=s,r[4]=d,r[5]=e.children,r[6]=e.disabled,r[7]=e.id,r[8]=e.style,r[9]=e.width,r[10]=c,r[11]=u,r[12]=a}else a=r[12];return a}function F(e){let t,a,r,s=(0,i.c)(11),{id:o,position:d}=e,c="".concat(o,"-").concat(d);s[0]!==d?(t={position:d},s[0]=d,s[1]=t):t=s[1],s[2]!==c||s[3]!==t?(a={id:c,data:t},s[2]=c,s[3]=t,s[4]=a):a=s[4];let{setNodeRef:u,isOver:h}=(0,n.zM)(a),m="".concat(o,"-").concat(d),p="before"===d?-2:"auto",g="after"===d?-2:"auto",f=h?"var(--theme-success-400)":"transparent";return s[5]!==u||s[6]!==m||s[7]!==p||s[8]!==g||s[9]!==f?(r=(0,l.jsx)("div",{className:"droppable-widget","data-testid":m,ref:u,style:{position:"absolute",left:p,right:g,top:0,bottom:0,borderRadius:"1000px",width:"4px",backgroundColor:f,marginBottom:"10px",marginTop:"10px",pointerEvents:"none",zIndex:1e3}}),s[5]=u,s[6]=m,s[7]=p,s[8]=g,s[9]=f,s[10]=r):r=s[10],r}},43289:(e,t,a)=>{a.d(t,{LanguageSelector:()=>s});var i=a(96221),l=a(73627),n=a(94490),r=a(33839);a(91403);let s=e=>{let t,a,s=(0,i.c)(8),{languageOptions:o}=e,{i18n:d,switchLanguage:c}=(0,n.d)();if(s[0]!==c?(t=async e=>{await c(e.value)},s[0]=c,s[1]=t):t=s[1],s[2]!==d||s[3]!==o||s[4]!==t){let e;s[6]!==d?(e=e=>e.value===d.language,s[6]=d,s[7]=e):e=s[7],a=(0,l.jsx)(r.ReactSelect,{inputId:"language-select",isClearable:!1,onChange:t,options:o,value:o.find(e)}),s[2]=d,s[3]=o,s[4]=t,s[5]=a}else a=s[5];return a}},74130:(e,t,a)=>{a.d(t,{ToggleTheme:()=>o});var i=a(96221),l=a(73627),n=a(84274),r=a(94490),s=a(33839);a(91403);let o=()=>{let e,t,a=(0,i.c)(7),{autoMode:o,setTheme:d,theme:c}=(0,n.j)(),{t:u}=(0,r.d)();a[0]!==d?(e=e=>{d(e)},a[0]=d,a[1]=e):e=a[1];let h=e;return a[2]!==o||a[3]!==h||a[4]!==u||a[5]!==c?(t=(0,l.jsx)(s.RadioGroupField,{disableModifyingForm:!0,field:{name:"theme",label:u("general:adminTheme"),options:[{label:u("general:automatic"),value:"auto"},{label:u("general:light"),value:"light"},{label:u("general:dark"),value:"dark"}]},onChange:h,path:"theme",value:o?"auto":c}),a[2]=o,a[3]=h,a[4]=u,a[5]=c,a[6]=t):t=a[6],t}},75318:(e,t,a)=>{a.d(t,{ResetPasswordForm:()=>c});var i=a(96221),l=a(73627),n=a(94490),r=a(84274),s=a(33839),o=a(833),d=a(58230);a(91403);let c=e=>{let t,a,c=(0,i.c)(11),{token:u}=e,h=(0,n.d)(),{config:m}=(0,r.c)(),{admin:p,routes:g}=m,{routes:f,user:w}=p,{login:b}=f,{admin:v,api:x}=g,y=(0,o.useRouter)(),{fetchFullUser:j}=(0,s.useAuth)();c[0]!==v||c[1]!==j||c[2]!==y||c[3]!==b?(t=async()=>{await j()?y.push(v):y.push((0,d.Q)({adminRoute:v,path:b}))},c[0]=v,c[1]=j,c[2]=y,c[3]=b,c[4]=t):t=c[4];let S=t;return c[5]!==x||c[6]!==h||c[7]!==S||c[8]!==u||c[9]!==w?(a=(0,l.jsxs)(s.Form,{action:(0,d.Q)({apiRoute:x,path:"/".concat(w,"/reset-password")}),initialState:{"confirm-password":{initialValue:"",valid:!1,value:""},password:{initialValue:"",valid:!1,value:""},token:{initialValue:u,valid:!0,value:u}},method:"POST",onSuccess:S,children:[(0,l.jsxs)("div",{className:"inputWrap",children:[(0,l.jsx)(s.PasswordField,{field:{name:"password",label:h.t("authentication:newPassword"),required:!0},path:"password",schemaPath:"".concat(w,".password")}),(0,l.jsx)(s.ConfirmPasswordField,{}),(0,l.jsx)(s.HiddenField,{path:"token",schemaPath:"".concat(w,".token"),value:u})]}),(0,l.jsx)(s.FormSubmit,{size:"large",children:h.t("authentication:resetPassword")})]}),c[5]=x,c[6]=h,c[7]=S,c[8]=u,c[9]=w,c[10]=a):a=c[10],a}},78457:(e,t,a)=>{a.d(t,{AccountClient:()=>s});var i=a(96221),l=a(33839),n=a(94490),r=a(91403);let s=()=>{let e,t,a=(0,i.c)(4),{setStepNav:s}=(0,l.useStepNav)(),{t:o}=(0,n.d)();return a[0]!==s||a[1]!==o?(e=()=>{let e=[];e.push({label:o("authentication:account"),url:"/account"}),s(e)},t=[s,o],a[0]=s,a[1]=o,a[2]=e,a[3]=t):(e=a[2],t=a[3]),r.useEffect(e,t),null}},82344:(e,t,a)=>{a.d(t,{LoginForm:()=>m});var i=a(96221),l=a(73627),n=a(91403),r=a(84274),s=a(94490),o=a(33839),d=a(58230),c=a(13308);let u=e=>{let t=(0,i.c)(11),{type:a,required:n}=e,r=void 0===n||n,{t:d}=(0,s.d)();if("email"===a){let e;return t[0]!==r||t[1]!==d?(e=(0,l.jsx)(o.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:d("general:email"),required:r},path:"email",validate:c.Rp}),t[0]=r,t[1]=d,t[2]=e):e=t[2],e}if("username"===a){let e;return t[3]!==r||t[4]!==d?(e=(0,l.jsx)(o.TextField,{field:{name:"username",label:d("authentication:username"),required:r},path:"username",validate:c.Xh}),t[3]=r,t[4]=d,t[5]=e):e=t[5],e}if("emailOrUsername"===a){let e;if(t[6]!==r||t[7]!==d){let a;t[9]!==d?(a=(e,t)=>{let a=(0,c.Xh)(e,t),i=(0,c.Rp)(e,t);return!!i||!!a||"".concat(d("general:email"),": ").concat(i," ").concat(d("general:username"),": ").concat(a)},t[9]=d,t[10]=a):a=t[10],e=(0,l.jsx)(o.TextField,{field:{name:"username",label:d("authentication:emailOrUsername"),required:r},path:"username",validate:a}),t[6]=r,t[7]=d,t[8]=e}else e=t[8];return e}return null},h="login__form",m=e=>{let t,a,c,m,p=(0,i.c)(23),{prefillEmail:g,prefillPassword:f,prefillUsername:w,searchParams:b}=e,{config:v,getEntityConfig:x}=(0,r.c)(),{admin:y,routes:j}=v,{routes:S,user:C}=y,{forgot:F}=S,{admin:P,api:_}=j;if(p[0]!==x||p[1]!==C){let{auth:e}=x({collectionSlug:C});a=(e=>({canLoginWithEmail:!e||e.allowEmailLogin,canLoginWithUsername:!!e}))(t=e.loginWithUsername),p[0]=x,p[1]=C,p[2]=t,p[3]=a}else t=p[2],a=p[3];let{canLoginWithEmail:k,canLoginWithUsername:R}=a;p[4]!==k||p[5]!==R?(c=()=>k&&R?"emailOrUsername":R?"username":"email",p[4]=k,p[5]=R,p[6]=c):c=p[6];let[N]=n.useState(c),{t:E}=(0,s.d)(),{setUser:A}=(0,o.useAuth)(),D=null!=f?f:void 0,W=null!=f?f:void 0;if(p[7]!==P||p[8]!==_||p[9]!==F||p[10]!==N||p[11]!==t||p[12]!==g||p[13]!==w||p[14]!==(null==b?void 0:b.redirect)||p[15]!==A||p[16]!==E||p[17]!==D||p[18]!==W||p[19]!==C){let e,a={password:{initialValue:D,valid:!0,value:W}};t?a.username={initialValue:null!=w?w:void 0,valid:!0,value:null!=w?w:void 0}:a.email={initialValue:null!=g?g:void 0,valid:!0,value:null!=g?g:void 0},p[21]!==A?(e=e=>{A(e)},p[21]=A,p[22]=e):e=p[22];let i=e;m=(0,l.jsxs)(o.Form,{action:(0,d.Q)({apiRoute:_,path:"/".concat(C,"/login")}),className:h,disableSuccessStatus:!0,initialState:a,method:"POST",onSuccess:i,redirect:(({allowAbsoluteUrls:e=!1,fallbackTo:t="/",redirectTo:a})=>{let i;if("string"!=typeof a)return t;try{i=decodeURIComponent(a.trim())}catch{return t}let l=i.startsWith("/")&&!i.startsWith("//")&&!i.startsWith("/%2F")&&!i.startsWith("/\\/")&&!i.startsWith("/\\\\")&&!i.startsWith("/\\")&&!i.toLowerCase().startsWith("/javascript:")&&!i.toLowerCase().startsWith("/http"),n=e&&/^https?:\/\/\S+$/i.test(i);return l||n?i:t})({fallbackTo:P,redirectTo:null==b?void 0:b.redirect}),waitForAutocomplete:!0,children:[(0,l.jsxs)("div",{className:"".concat(h,"__inputWrap"),children:[(0,l.jsx)(u,{type:N}),(0,l.jsx)(o.PasswordField,{field:{name:"password",label:E("general:password"),required:!0},path:"password"})]}),(0,l.jsx)(o.Link,{href:(0,d.Q)({adminRoute:P,path:F}),prefetch:!1,children:E("authentication:forgotPasswordQuestion")}),(0,l.jsx)(o.FormSubmit,{size:"large",children:E("authentication:login")})]}),p[7]=P,p[8]=_,p[9]=F,p[10]=N,p[11]=t,p[12]=g,p[13]=w,p[14]=null==b?void 0:b.redirect,p[15]=A,p[16]=E,p[17]=D,p[18]=W,p[19]=C,p[20]=m}else m=p[20];return m}},93894:(e,t,a)=>{a.d(t,{LogoutClient:()=>u});var i=a(96221),l=a(73627),n=a(33839),r=a(84274),s=a(94490),o=a(833),d=a(58230),c=a(91403);let u=e=>{let t,a,u,h,m,p=(0,i.c)(23),{adminRoute:g,inactivity:f,redirect:w}=e,{logOut:b,user:v}=(0,n.useAuth)();(0,r.c)();let{startRouteTransition:x}=(0,n.useRouteTransition)();null==v||v.id;let y=!!(null==v?void 0:v.id),j=c.useRef(!1);p[0]!==g||p[1]!==f||p[2]!==w?(t=()=>(0,d.Q)({adminRoute:g,path:"/login".concat(f&&w&&w.length>0?"?redirect=".concat(encodeURIComponent(w)):"")}),p[0]=g,p[1]=f,p[2]=w,p[3]=t):t=p[3];let[S]=c.useState(t),{t:C}=(0,s.d)(),F=(0,o.useRouter)();p[4]!==b||p[5]!==S||p[6]!==F||p[7]!==x||p[8]!==C?(a=async()=>{if(!j.current){j.current=!0,await b(),n.toast.success(C("authentication:loggedOutSuccessfully")),x(()=>F.push(S));return}},p[4]=b,p[5]=S,p[6]=F,p[7]=x,p[8]=C,p[9]=a):a=p[9];let P=a;if(p[10]!==P||p[11]!==f||p[12]!==y||p[13]!==S||p[14]!==F||p[15]!==x?(u=()=>{y&&!f?P():j.current||(j.current=!0,x(()=>F.push(S)))},h=[P,y,S,F,x,f],p[10]=P,p[11]=f,p[12]=y,p[13]=S,p[14]=F,p[15]=x,p[16]=u,p[17]=h):(u=p[16],h=p[17]),(0,c.useEffect)(u,h),!y&&f){let e;return p[18]!==S||p[19]!==C?(e=(0,l.jsxs)("div",{className:"".concat("logout","__wrap"),children:[(0,l.jsx)("h2",{children:C("authentication:loggedOutInactivity")}),(0,l.jsx)(n.Button,{buttonStyle:"secondary",el:"link",size:"large",url:S,children:C("authentication:logBackIn")})]}),p[18]=S,p[19]=C,p[20]=e):e=p[20],e}return p[21]!==C?(m=(0,l.jsx)(n.LoadingOverlay,{animationDuration:"0ms",loadingText:C("authentication:loggingOut")}),p[21]=C,p[22]=m):m=p[22],m}}}]);